<!doctype html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NYC Photo Guide</title>
  <style>
    :root {
      --bg: #0f1115;
      --fg: #e6e9ef;
      --muted: #9aa4b2;
      --panel: #151823;
      --accent: #6ea8fe;
      --good: #2ca02c;
      --warn: #ff7f0e;
      --bad: #d9534f;
      --teal: #2aa198;
      --card: #141824;
      --border: #2a2f3a;
    }
    [data-theme="light"] {
      --bg: #ffffff;
      --fg: #1a1f2b;
      --muted: #4c5566;
      --panel: #f4f6fb;
      --accent: #0b5ed7;
      --good: #2ca02c;
      --warn: #d97706;
      --bad: #c0392b;
      --teal: #057a73;
      --card: #ffffff;
      --border: #e3e8ef;
    }
    html, body { height: 100%; background: var(--bg); color: var(--fg); margin: 0; font: 14px/1.45 system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans"; }
    a { color: var(--accent); text-decoration: none; }
    a:hover { text-decoration: underline; }
    header {
      position: sticky; top: 0; z-index: 10;
      display: grid; grid-template-columns: 1fr auto; gap: 12px;
      padding: 10px 14px; background: var(--panel); border-bottom: 1px solid var(--border);
    }
    header .title { font-weight: 700; letter-spacing: 0.3px; }
    header .controls { display: grid; grid-template-columns: repeat(12, max-content); gap: 8px; align-items: center; }
    .chip { border: 1px solid var(--border); background: var(--card); padding: 6px 8px; border-radius: 8px; }
    .btn { cursor: pointer; padding: 6px 10px; border-radius: 8px; border: 1px solid var(--border); background: var(--card); color: var(--fg); }
    .btn:hover, .chip:focus { outline: 2px solid var(--accent); }
    .layout { display: grid; grid-template-columns: 360px 1fr; gap: 12px; padding: 12px; }
    .panels { display: grid; gap: 12px; }
    .panel { background: var(--panel); border: 1px solid var(--border); border-radius: 10px; padding: 10px; }
    .panel h3 { margin: 0 0 8px; font-size: 14px; color: var(--muted); }
    .map-wrap { position: sticky; top: 64px; height: calc(100vh - 76px); border: 1px solid var(--border); border-radius: 10px; overflow: hidden; }
    #map-google, #map-leaflet { height: 100%; width: 100%; display: none; }
    #map-google.active, #map-leaflet.active { display: block; }
    .cards { margin-top: 12px; display: grid; gap: 12px; }
    .card { background: var(--card); border: 1px solid var(--border); border-radius: 12px; overflow: hidden; }
    .card .head { display: grid; grid-template-columns: 1fr auto; gap: 6px; padding: 10px; border-bottom: 1px solid var(--border); align-items: center; }
    .badges { display: inline-flex; gap: 6px; margin-left: 6px; }
    .badge { background: var(--panel); border: 1px solid var(--border); padding: 2px 6px; border-radius: 999px; font-size: 12px; color: var(--muted); }
    .summary { padding: 8px 10px; color: var(--muted); }
    .kv { display: grid; grid-template-columns: 120px 1fr; gap: 6px; padding: 8px 10px; border-top: 1px dashed var(--border); }
    .actions { display: flex; flex-wrap: wrap; gap: 6px; padding: 8px 10px; border-top: 1px dashed var(--border); }
    .pillset { display: flex; flex-wrap: wrap; gap: 6px; padding: 8px 10px; border-top: 1px dashed var(--border); }
    details { padding: 10px; border-top: 1px solid var(--border); }
    details > summary { cursor: pointer; font-weight: 600; }
    .grid { display: grid; gap: 6px; grid-template-columns: repeat(2, minmax(0,1fr)); }
    .photos { display: grid; grid-template-columns: repeat(4, 1fr); gap: 6px; margin-top: 8px; }
    .photos img { width: 100%; height: 100px; object-fit: cover; border-radius: 6px; }
    .toast { position: fixed; bottom: 14px; right: 14px; background: var(--card); border: 1px solid var(--border); padding: 10px 12px; border-radius: 8px; display: none; }
    .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); border: 0; }
    @media (max-width: 1000px) {
      .layout { grid-template-columns: 1fr; }
      .map-wrap { position: relative; top: 0; height: 320px; }
    }
  </style>
</head>
<body>
  <header>
    <div class="title">ðŸ“¸ NYC Photo Guide</div>
    <div class="controls" role="toolbar" aria-label="Top controls">
      <label class="chip">Day A <input id="dayA" type="date" class="sr-only"></label>
      <label class="chip">Day B <input id="dayB" type="date" class="sr-only"></label>
      <label class="chip"><input id="toggleA" type="checkbox" checked> Show A</label>
      <label class="chip"><input id="toggleB" type="checkbox" checked> Show B</label>
      <label class="chip"><input id="fMorning" type="checkbox" checked> Morning</label>
      <label class="chip"><input id="fAfternoon" type="checkbox" checked> Afternoon</label>
      <label class="chip"><input id="fEvening" type="checkbox" checked> Evening</label>
      <label class="chip"><input id="fNight" type="checkbox" checked> Night</label><label class="chip"><input id="fPro" type="checkbox"> Pro only</label><label class="chip"><input id="fRain" type="checkbox"> Rain plan</label><label class="chip"><input id="fWind" type="checkbox"> Wind-safe</label>
      <span class="chip" id="rankLabel">Rank 1â€“5</span>
      <input id="rankMin" class="chip" type="range" min="1" max="5" value="1" aria-label="Min rank">
      <input id="rankMax" class="chip" type="range" min="1" max="5" value="5" aria-label="Max rank">
      <input id="search" class="chip" placeholder="Searchâ€¦" aria-label="Search">
      <button id="expandAll" class="btn">Expand</button>
      <button id="collapseAll" class="btn">Collapse</button>
      <button id="exportCSV" class="btn">CSV</button>
      <button id="exportKML" class="btn">KML</button>
      <button id="exportJSON" class="btn">Export JSON</button>
      <label class="btn">Import JSON <input id="importJSON" class="sr-only" type="file" accept="application/json"></label>
      <button id="printBtn" class="btn">Print</button>
      <button id="themeToggle" class="btn" aria-pressed="true">Theme</button>
      <div class="chip" role="tablist" aria-label="Map mode">
        <label><input type="radio" name="mapMode" value="google" checked> Google</label>
        <label><input type="radio" name="mapMode" value="leaflet"> Leaflet</label>
      </div>
    </div>
  </header>

  <div class="layout">
    <div class="panels" id="panels"></div>
    <div class="map-wrap">
      <div id="map-google" class="active" aria-label="Google Map"></div>
      <div id="map-leaflet" aria-label="Leaflet Map"></div>
    </div>
  </div>

  <main class="cards" id="cards" aria-live="polite"></main>

  <div class="toast" id="toast" role="status" aria-live="polite"></div>

  
<script type="module">
const MODULES = {"app": "\nimport { LOCATIONS as RAW_LOCATIONS } from 'data/locations';\nimport { loadConfig } from 'config';\nimport { getSunTimes, getMoonTimes, getMoonIllumination, fmtTime } from 'lib/sunmoon';\nimport { GoogleMapEngine } from 'map-google';\nimport { LeafletMapEngine } from 'map-leaflet';\n\n// --- State ---\n// Identify the two dataset days so \"Show A/B\" filters remain stable regardless of picked dates.\nconst DATA_DAYS = Array.from(new Set(RAW_LOCATIONS.map(l => l.day))).sort();\nconst DAY_LABEL_FOR = (dayStr) => (dayStr === DATA_DAYS[0] ? 'A' : dayStr === DATA_DAYS[1] ? 'B' : '?');\n\nconst state = {\n  dayMap: { A: DATA_DAYS[0] || '2025-10-03', B: DATA_DAYS[1] || '2025-10-04' },\n  show: { A: true, B: true, Morning: true, Afternoon: true, Evening: true, Night: true },\n  rank: [1,5],\n  search: '',\n  mapMode: 'google',\n  anchorOverrides: loadOverrides(),\n};\nlet CONFIG = { GOOGLE_MAPS_API_KEY: '' };\n\n// Deep copy and apply overrides\nfunction hydrateLocations() {\n  const locs = JSON.parse(JSON.stringify(RAW_LOCATIONS));\n  for (const loc of locs) {\n    const ov = state.anchorOverrides[loc.id];\n    if (ov && ov[loc.activeAnchor || 0]) {\n      const a = ov[loc.activeAnchor||0];\n      if (a && typeof a.lat === 'number' && typeof a.lon === 'number') {\n        loc.anchors[loc.activeAnchor||0].lat = a.lat;\n        loc.anchors[loc.activeAnchor||0].lon = a.lon;\n      }\n    }\n  }\n  return locs;\n}\n\n// Map engines\nlet engine = null;\nlet googleEngine = null;\nlet leafletEngine = null;\n\nfunction $(sel){ return document.querySelector(sel); }\nfunction $all(sel){ return Array.from(document.querySelectorAll(sel)); }\nfunction toast(msg){ const t=$('#toast'); t.textContent=msg; t.style.display='block'; setTimeout(()=>t.style.display='none',3000); }\n\nfunction saveOverrides() {\n  try { localStorage.setItem('anchorOverrides', JSON.stringify(state.anchorOverrides)); } catch {}\n}\nfunction loadOverrides() {\n  try {\n    const raw = localStorage.getItem('anchorOverrides');\n    return raw ? JSON.parse(raw) : {};\n  } catch { return {}; }\n}\n\n// NOAA hi/lo\nasync function fetchNoaaHiLo(dateStr) {\n  const ymd = dateStr.replaceAll('-','');\n  const url = \\`https://api.tidesandcurrents.noaa.gov/api/prod/datagetter?product=predictions&begin_date=${ymd}&end_date=${ymd}&datum=MLLW&station=8518750&time_zone=lst_ldt&interval=hilo&units=english&format=json\\`;\n  try {\n    const resp = await fetch(url);\n    if (!resp.ok) throw new Error('NOAA fetch failed');\n    const json = await resp.json();\n    const preds = json?.predictions || [];\n    const lines = preds.map(p => \\`${p.t.substring(11,16)} ${p.type === 'H' ? 'High' : 'Low'} ${p.v} ft\\`);\n    return lines.join(' \u2022 ');\n  } catch (e) {\n    return 'Open NOAA high/low';\n  }\n}\n\nfunction groupByDayBlock(locs) {\n  const by = {};\n  for (const loc of locs) {\n    const dayLabel = DAY_LABEL_FOR(loc.day);\n    if (!state.show[dayLabel]) continue;\n    if (!state.show[loc.block]) continue;\n    if (loc.rank < state.rank[0] || loc.rank > state.rank[1]) continue;\n\n    const hay = (loc.name + ' ' + loc.gear + ' ' + loc.whyNow + ' ' +\n      (loc.pins||[]).map(x=>x.title+' '+x.detail).join(' ') + ' ' +\n      (loc.shots||[]).map(x=>x.title+' '+x.detail).join(' ')).toLowerCase();\n    if (state.search && !hay.includes(state.search.toLowerCase())) continue;\n\n    const key = \\`${dayLabel}|${loc.block}\\`;\n    if (!by[key]) by[key] = [];\n    by[key].push(loc);\n  }\n  // sort by rank\n  Object.values(by).forEach(arr => arr.sort((a,b) => a.rank - b.rank));\n  return by;\n}\n\nfunction renderPanels() {\n  const root = $('#panels');\n  root.innerHTML = '';\n  for (const label of ['A','B']) {\n    if (!state.show[label]) continue;\n    const dayStr = state.dayMap[label];\n    const date = new Date(dayStr + 'T12:00:00');\n    const lat = 40.7128, lon = -74.0060;\n    const sun = getSunTimes(date, lat, lon);\n    const moonIll = getMoonIllumination(date);\n    const moon = getMoonTimes(date, lat, lon);\n    const panel = document.createElement('div');\n    panel.className = 'panel';\n    panel.innerHTML = \\`\n      <h3>Day ${label} \u2014 ${dayStr}</h3>\n      <div class=\"grid\">\n        <div><strong>Dawn</strong><br>${fmtTime(sun.dawn)}</div>\n        <div><strong>Sunrise</strong><br>${fmtTime(sun.sunrise)}</div>\n        <div><strong>Sunset</strong><br>${fmtTime(sun.sunset)}</div>\n        <div><strong>Dusk</strong><br>${fmtTime(sun.dusk)}</div>\n      </div>\n      <div class=\"grid\" style=\"margin-top:8px\">\n        <div><strong>Moonrise</strong><br>${fmtTime(moon.rise)}</div>\n        <div><strong>Moonset</strong><br>${fmtTime(moon.set)}</div>\n        <div><strong>Moon illum.</strong><br>${Math.round((moonIll.fraction||0)*100)}%</div>\n        <div id=\"noaa-${label}\"><em>Loading tides\u2026</em></div>\n      </div>\n    \\`;\n    root.appendChild(panel);\n    fetchNoaaHiLo(dayStr).then(txt => {\n      const el = document.getElementById(\\`noaa-${label}\\`);\n      if (el) el.innerHTML = \\`<strong>Tides (Battery)</strong><br>${txt}\\`;\n    });\n  }\n}\n\nfunction renderCards(locs) {\n  const container = $('#cards');\n  container.innerHTML = '';\n  const grouped = groupByDayBlock(locs);\n  const sections = Object.keys(grouped).sort((a,b)=>{\n    const [da,ba] = a.split('|'), [db,bb] = b.split('|');\n    const order = { 'Morning':0, 'Afternoon':1, 'Evening':2, 'Night':3 };\n    if (da !== db) return da < db ? -1 : 1;\n    return order[ba]-order[bb];\n  });\n  for (const key of sections) {\n    const [dayLabel, block] = key.split('|');\n    const h = document.createElement('div');\n    h.className = 'panel';\n    h.innerHTML = \\`<h3>Day ${dayLabel} \u2022 ${block}</h3>\\`;\n    container.appendChild(h);\n    for (const loc of grouped[key]) {\n      container.appendChild(renderCard(loc));\n    }\n  }\n}\n\nfunction renderCard(loc) {\n  const card = document.createElement('article');\n  card.className = 'card';\n  card.id = \\`card-${loc.id}\\`;\n  const anchor = loc.anchors[loc.activeAnchor || 0];\n  const summary = \\`${loc.day} \u2022 ${loc.block} \u2022 ${loc.bearing}\\`;\n  card.innerHTML = \\`\n    <div class=\"head\">\n      <div><strong>${loc.name}</strong>\n        <span class=\"badges\">\n          <span class=\"badge\">#${loc.rank}</span>\n          <span class=\"badge\">${loc.block}</span>\n        </span>\n      </div>\n      <button class=\"btn\" data-expander>Details</button>\n    </div>\n    <div class=\"summary\">${summary}</div>\n    <div class=\"kv\"><div>Why now</div><div>${loc.whyNow}</div></div>\n    <div class=\"kv\"><div>Gear</div><div>${loc.gear}</div></div>\n    <div class=\"kv\"><div>Settings</div><div>${loc.settings}</div></div>\n    <div class=\"actions\">\n      <button class=\"btn\" data-show>Show on map</button>\n      <button class=\"btn\" data-eta>ETA</button>\n      <button class=\"btn\" data-route>Route</button>\n      <a class=\"btn\" href=\"https://maps.google.com/?q=${anchor.lat},${anchor.lon}\" target=\"_blank\" rel=\"noopener\">Open (anchor)</a>\n      <a class=\"btn\" href=\"https://www.google.com/maps/dir/?api=1&destination=${anchor.lat},${anchor.lon}&travelmode=walking\" target=\"_blank\" rel=\"noopener\">Walk to anchor</a>\n    </div>\n    <div class=\"pillset\" data-anchors></div>\n    <div class=\"pillset\" data-micros></div>\n    <details>\n      <summary>Pins & Shots</summary>\n      <div class=\"grid\">\n        <div><strong>Pins</strong><ul>${(loc.pins||[]).map(p=>\\`<li>${p.title} \u2014 ${p.detail}</li>\\`).join('')}</ul></div>\n        <div><strong>Shots</strong><ul>${(loc.shots||[]).map(s=>\\`<li>${s.title} \u2014 ${s.detail}</li>\\`).join('')}</ul></div>\n      </div>\n      <div class=\"grid\" style=\"margin-top:8px\">\n        <div><strong>Tides (Battery)</strong><div id=\"tide-${loc.id}\">\u2014</div></div>\n        <div><strong>Moon</strong><div id=\"moon-${loc.id}\">\u2014</div></div>\n      </div>\n      <div class=\"grid\" style=\"margin-top:8px\">\n        <div><strong>Address</strong><div id=\"addr-${loc.id}\">\u2014</div></div>\n        <div>\n          <strong>Reference Images</strong>\n          <div><button class=\"btn\" data-photos>Load images</button></div>\n          <div class=\"photos\" id=\"photos-${loc.id}\"></div>\n        </div>\n      </div>\n    </details>\n  \\`;\n  // Anchor pills\n  const anchorWrap = card.querySelector('[data-anchors]');\n  (loc.anchors||[]).forEach((a,idx)=>{\n    const b = document.createElement('button');\n    b.className = 'btn'; b.textContent = a.label || \\`Anchor ${idx+1}\\`;\n    b.addEventListener('click', ()=>{\n      loc.activeAnchor = idx;\n      renderAll();\n      setTimeout(()=> fitCardOnMap(loc), 0);\n    });\n    anchorWrap.appendChild(b);\n  });\n  // Micro-pin deep links\n  const microWrap = card.querySelector('[data-micros]');\n  (loc.micro||[]).forEach((m)=>{\n    const mp = computeMicro(anchor, m);\n    const a = document.createElement('a');\n    a.className='btn';\n    a.textContent = m.title;\n    a.href = \\`https://www.google.com/maps/dir/?api=1&destination=${mp.lat},${mp.lon}&travelmode=walking\\`;\n    a.target = '_blank'; a.rel = 'noopener';\n    microWrap.appendChild(a);\n  });\n  // Buttons\n  card.querySelector('[data-expander]').addEventListener('click', ()=>{\n    const det = card.querySelector('details');\n    det.open = !det.open;\n  });\n  card.querySelector('[data-show]').addEventListener('click', ()=> fitCardOnMap(loc));\n  card.querySelector('[data-eta]').addEventListener('click', ()=> etaFor(loc).catch(e=>toast(e.message)));\n  card.querySelector('[data-route]').addEventListener('click', ()=> routeFor(loc).catch(e=>toast(e.message)));\n  // Tide & Moon per-card\n  const dayStr = loc.day;\n  fetchNoaaHiLo(dayStr).then(txt=>{ const el=$(\\`#tide-${loc.id}\\`); if (el) el.textContent = txt; });\n  const moonIll = getMoonIllumination(new Date(dayStr+'T12:00:00'));\n  const moonTimes = getMoonTimes(new Date(dayStr+'T12:00:00'), 40.7128, -74.0060);\n  const moonEl = $(\\`#moon-${loc.id}\\`);\n  if (moonEl) moonEl.textContent = \\`Rise ${fmtTime(moonTimes.rise)} / Set ${fmtTime(moonTimes.set)} \u2022 ${Math.round((moonIll.fraction||0)*100)}%\\`;\n  // Reverse geocode (guarded)\n  reverseGeocode(anchor.lat, anchor.lon).then(addr => {\n    const el = $(\\`#addr-${loc.id}\\`); if (el) el.textContent = addr || '\u2014';\n  }).catch(()=>{});\n  // Photos lazy loading\n  card.querySelector('[data-photos]').addEventListener('click', ()=>{\n    loadPlacePhotos(loc).then(urls => {\n      const grid = $(\\`#photos-${loc.id}\\`);\n      grid.innerHTML = urls.length ? urls.map(u=>\\`<img loading=\"lazy\" src=\"${u}\">\\`).join('') : '<em>No images found.</em>';\n    }).catch(err => {\n      const grid = $(\\`#photos-${loc.id}\\`);\n      grid.innerHTML = \\`<em>Failed to load images.</em>\\`;\n    });\n  });\n  return card;\n}\n\nfunction computeMicro(anchor, micro) {\n  const R = 6378137;\n  const br = (micro.bearing||0) * Math.PI/180;\n  const lat1 = anchor.lat * Math.PI/180;\n  const lon1 = anchor.lon * Math.PI/180;\n  const lat2 = Math.asin(Math.sin(lat1) * Math.cos((micro.r||0)/R) + Math.cos(lat1) * Math.sin((micro.r||0)/R) * Math.cos(br));\n  const lon2 = lon1 + Math.atan2(Math.sin(br) * Math.sin((micro.r||0)/R) * Math.cos(lat1), Math.cos((micro.r||0)/R) - Math.sin(lat1) * Math.sin(lat2));\n  return { lat: lat2*180/Math.PI, lon: lon2*180/Math.PI };\n}\n\nasync function reverseGeocode(lat, lon) {\n  if (state.mapMode !== 'google') return null; // only in Google mode to respect quotas\n  if (!window.google || !google.maps) return null;\n  const geocoder = new google.maps.Geocoder();\n  const res = await geocoder.geocode({ location: { lat, lng: lon } });\n  const addr = res.results?.[0]?.formatted_address;\n  return addr || null;\n}\n\nasync function loadPlacePhotos(loc) {\n  // Requires Google Places; use TextSearch on loc.name biased around anchor\n  if (!window.google || !google.maps || !google.maps.places) throw new Error('Google Places not loaded');\n  const anchor = loc.anchors[loc.activeAnchor || 0];\n  const svc = new google.maps.places.PlacesService(document.createElement('div'));\n  const query = loc.placeQuery || loc.name;\n  const req = { query, location: { lat: anchor.lat, lng: anchor.lon }, radius: 1000 };\n  return new Promise((resolve, reject) => {\n    svc.textSearch(req, (results, status) => {\n      if (status !== google.maps.places.PlacesServiceStatus.OK || !results?.length) return resolve([]);\n      const photos = results[0].photos || [];\n      const urls = photos.slice(0, 12).map(p => p.getUrl({ maxWidth: 400, maxHeight: 300 }));\n      resolve(urls);\n    });\n  });\n}\n\n// Map binding\nasync function ensureEngine() {\n  if (state.mapMode === 'google') {\n    $('#map-google').classList.add('active');\n    $('#map-leaflet').classList.remove('active');\n    if (!googleEngine) {\n      // Load Google\n      const container = $('#map-google');\n      googleEngine = new GoogleMapEngine(container);\n      await googleEngine.init({ apiKey: CONFIG.GOOGLE_MAPS_API_KEY });\n    }\n    engine = googleEngine;\n    if (leafletEngine) leafletEngine.clear();\n  } else {\n    $('#map-leaflet').classList.add('active');\n    $('#map-google').classList.remove('active');\n    if (!leafletEngine) {\n      const container = $('#map-leaflet');\n      leafletEngine = new LeafletMapEngine(container);\n      await leafletEngine.init({});\n    }\n    engine = leafletEngine;\n    if (googleEngine) googleEngine.clear();\n  }\n}\nfunction fitCardOnMap(loc){ if (engine) engine.fitForCard(loc); }\nasync function etaFor(loc) {\n  const anchor = loc.anchors[loc.activeAnchor||0];\n  if (!navigator.geolocation) throw new Error('Geolocation not supported');\n  await ensureEngine();\n  const res = await engine.routeFromUserTo(anchor);\n  toast(\\`ETA ${res.durationText} \u2022 Distance ${res.distanceText}\\`);\n  return res;\n}\nasync function routeFor(loc) {\n  const anchor = loc.anchors[loc.activeAnchor||0];\n  await ensureEngine();\n  if (state.mapMode !== 'google') {\n    toast('Route drawing is available in Google mode only. Showing ETA instead.');\n    return etaFor(loc);\n  }\n  const res = await engine.routeFromUserTo(anchor);\n  toast(\\`Route \u2022 ETA ${res.durationText}\\`);\n  return res;\n}\n\n// Rendering\nfunction renderAll() {\n  const locs = hydrateLocations();\n  renderPanels();\n  renderCards(locs);\n  ensureEngine().then(()=> engine.setData(filteredLocations(locs))).catch(err => {\n    console.warn('Google failed, switching to Leaflet', err);\n    state.mapMode = 'leaflet';\n    document.querySelector('input[name=\"mapMode\"][value=\"leaflet\"]').checked = true;\n    ensureEngine().then(()=> engine.setData(filteredLocations(locs)));\n  });\n}\nfunction filteredLocations(locs) {\n  const by = groupByDayBlock(locs);\n  return Object.values(by).flat();\n}\n\n// Event wiring\nwindow.addEventListener('anchor:dragged', (ev)=>{\n  const { id, anchorIndex, lat, lon } = ev.detail || {};\n  state.anchorOverrides[id] = state.anchorOverrides[id] || {};\n  state.anchorOverrides[id][anchorIndex] = { lat, lon };\n  saveOverrides();\n});\n\nfunction wireControls() {\n  $('#dayA').value = state.dayMap.A;\n  $('#dayB').value = state.dayMap.B;\n  $('#toggleA').checked = state.show.A;\n  $('#toggleB').checked = state.show.B;\n\n  const setDay = (label, val) => {\n    if (!val) return;\n    state.dayMap[label] = val;\n    renderAll();\n  };\n  $('#dayA').addEventListener('input', (e)=> setDay('A', e.target.value));\n  $('#dayB').addEventListener('input', (e)=> setDay('B', e.target.value));\n\n  $('#toggleA').addEventListener('change', (e)=>{ state.show.A = !!e.target.checked; renderAll(); });\n  $('#toggleB').addEventListener('change', (e)=>{ state.show.B = !!e.target.checked; renderAll(); });\n  $('#fMorning').addEventListener('change', (e)=>{ state.show.Morning = !!e.target.checked; renderAll(); });\n  $('#fAfternoon').addEventListener('change', (e)=>{ state.show.Afternoon = !!e.target.checked; renderAll(); });\n  $('#fEvening').addEventListener('change', (e)=>{ state.show.Evening = !!e.target.checked; renderAll(); });\n  $('#fNight').addEventListener('change', (e)=>{ state.show.Night = !!e.target.checked; renderAll(); });\n\n  const updateRank = ()=> {\n    const min = Math.min(+$('#rankMin').value, +$('#rankMax').value);\n    const max = Math.max(+$('#rankMin').value, +$('#rankMax').value);\n    state.rank = [min, max];\n    $('#rankLabel').textContent = \\`Rank ${min}\u2013${max}\\`;\n    renderAll();\n  };\n  $('#rankMin').addEventListener('input', updateRank);\n  $('#rankMax').addEventListener('input', updateRank);\n  $('#rankLabel').textContent = \\`Rank ${state.rank[0]}\u2013${state.rank[1]}\\`;\n\n  $('#search').addEventListener('input', (e)=>{ state.search = e.target.value; renderAll(); });\n  $('#expandAll').addEventListener('click', ()=> $all('.card details').forEach(d=> d.open = true));\n  $('#collapseAll').addEventListener('click', ()=> $all('.card details').forEach(d=> d.open = false));\n\n  $('#exportCSV').addEventListener('click', ()=> exportCSV(hydrateLocations()));\n  $('#exportKML').addEventListener('click', ()=> exportKML(hydrateLocations()));\n  $('#exportJSON').addEventListener('click', ()=> exportJSON());\n  $('#importJSON').addEventListener('change', importJSON);\n  $('#printBtn').addEventListener('click', ()=> window.print());\n  $('#themeToggle').addEventListener('click', ()=>{\n    const cur = document.documentElement.getAttribute('data-theme') || 'dark';\n    const next = cur === 'dark' ? 'light' : 'dark';\n    document.documentElement.setAttribute('data-theme', next);\n  });\n  $all('input[name=\"mapMode\"]').forEach(r=> r.addEventListener('change', (e)=>{\n    state.mapMode = e.target.value;\n    renderAll();\n  }));\n}\n\n// Exporters\nfunction download(name, content, mime='text/plain') {\n  const blob = new Blob([content], { type: mime });\n  const url = URL.createObjectURL(blob);\n  const a = document.createElement('a'); a.href = url; a.download = name; a.click();\n  setTimeout(()=> URL.revokeObjectURL(url), 5000);\n}\nfunction exportCSV(locs) {\n  const rows = [['id','name','day','block','rank','anchor_label','lat','lon']];\n  for (const loc of locs) {\n    const a = loc.anchors[loc.activeAnchor||0];\n    rows.push([loc.id, loc.name, loc.day, loc.block, loc.rank, a.label, a.lat, a.lon]);\n  }\n  const csv = rows.map(r=> r.map(x => \\`\"${String(x).replace(/\"/g,'\"\"')}\"\\`).join(',')).join('\\n');\n  download('nyc-photo-guide.csv', csv, 'text/csv');\n}\nfunction exportKML(locs) {\n  const placemarks = [];\n  for (const loc of locs) {\n    const a = loc.anchors[loc.activeAnchor||0];\n    placemarks.push(\\`<Placemark><name>${escapeXml(loc.name)}</name><Point><coordinates>${a.lon},${a.lat},0</coordinates></Point></Placemark>\\`);\n    for (const m of (loc.micro||[])) {\n      const mp = computeMicro(a, m);\n      placemarks.push(\\`<Placemark><name>${escapeXml(m.title)}</name><Point><coordinates>${mp.lon},${mp.lat},0</coordinates></Point></Placemark>\\`);\n    }\n  }\n  const kml = \\`<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<kml xmlns=\"http://www.opengis.net/kml/2.2\"><Document>\n${placemarks.join('\\n')}\n</Document></kml>\\`;\n  download('nyc-photo-guide.kml', kml, 'application/vnd.google-earth.kml+xml');\n}\nfunction escapeXml(s){ return String(s).replace(/[<>&'\"]/g, c => ({'<':'&lt;','>':'&gt;','&':'&amp;',\"'\":'&apos;','\"':'&quot;'}[c])); }\n\nfunction exportJSON() {\n  const out = { LOCATIONS: hydrateLocations(), state: { dayMap: state.dayMap } };\n  download('nyc-photo-guide.json', JSON.stringify(out, null, 2), 'application/json');\n}\nasync function importJSON(e) {\n  const file = e.target.files?.[0];\n  if (!file) return;\n  const text = await file.text();\n  try {\n    const data = JSON.parse(text);\n    if (data?.state?.dayMap) state.dayMap = data.state.dayMap;\n    if (Array.isArray(data?.LOCATIONS)) {\n      // Only take anchor overrides from file to avoid clobbering base dataset\n      const overrides = {};\n      for (const loc of data.LOCATIONS) {\n        const base = RAW_LOCATIONS.find(l=> l.id === loc.id);\n        if (!base) continue;\n        const aIdx = loc.activeAnchor || 0;\n        const a = loc.anchors?.[aIdx];\n        if (a) {\n          overrides[loc.id] = overrides[loc.id] || {};\n          overrides[loc.id][aIdx] = { lat: a.lat, lon: a.lon };\n        }\n      }\n      state.anchorOverrides = overrides;\n      saveOverrides();\n    }\n    renderAll();\n    toast('Imported JSON');\n  } catch (err) {\n    toast('Invalid JSON');\n  } finally {\n    e.target.value = '';\n  }\n}\n\n// Boot\n(async function boot(){\n  CONFIG = await loadConfig();\n  wireControls();\n  renderAll();\n})();\n\n// Accessibility\ndocument.addEventListener('keydown', (e)=>{\n  if (e.key === 'Escape') { $('#toast').style.display='none'; }\n});\n\n", "config": "\n// config.js \u2014 loads env/config for the SPA\n// Source of truth order: window.__ENV -> localStorage -> .env file in same directory\nexport async function loadConfig() {\n  // Prefer explicitly injected global\n  if (typeof window !== 'undefined' && window.__ENV && window.__ENV.GOOGLE_MAPS_API_KEY) {\n    return { GOOGLE_MAPS_API_KEY: window.__ENV.GOOGLE_MAPS_API_KEY.trim() };\n  }\n  // Next: localStorage\n  try {\n    const fromLS = localStorage.getItem('GOOGLE_MAPS_API_KEY');\n    if (fromLS && fromLS.trim().length > 0) return { GOOGLE_MAPS_API_KEY: fromLS.trim() };\n  } catch(e) {\n    console.warn('localStorage not available', e);\n  }\n  // Finally: try to fetch a colocated .env file and parse it\n  try {\n    const resp = await fetch('./.env', { cache: 'no-store' });\n    if (resp.ok) {\n      const text = await resp.text();\n      const match = text.match(/^\\s*GOOGLE_MAPS_API_KEY\\s*=\\s*(.+)\\s*$/m);\n      if (match) return { GOOGLE_MAPS_API_KEY: match[1].trim() };\n    }\n  } catch(e) {\n    console.warn('Could not fetch .env file', e);\n  }\n  // Fallback to env.example if present\n  try {\n    const resp = await fetch('./env.example', { cache: 'no-store' });\n    if (resp.ok) {\n      const text = await resp.text();\n      const match = text.match(/^\\s*GOOGLE_MAPS_API_KEY\\s*=\\s*(.+)\\s*$/m);\n      if (match) return { GOOGLE_MAPS_API_KEY: match[1].trim() };\n    }\n  } catch (e) {\n    console.warn('Could not fetch env.example', e);\n  }\n  return { GOOGLE_MAPS_API_KEY: '' }; // empty means \"not configured\"\n}\nexport async function requireApiKey() {\n  const cfg = await loadConfig();\n  if (!cfg.GOOGLE_MAPS_API_KEY) {\n    alert('Missing GOOGLE_MAPS_API_KEY. Put it in .env next to index.html or set window.__ENV.GOOGLE_MAPS_API_KEY before loading.');\n  }\n  return cfg;\n}\n", "data/locations": "// Auto-generated from locations.json. Do not edit by hand.\nexport const LOCATIONS = [\n  {\n    \"id\": \"dumbo_washington_water_manhattan_bridge_keyhole\",\n    \"name\": \"DUMBO \\u2014 Washington & Water (Manhattan Bridge Keyhole)\",\n    \"day\": \"2025-10-03\",\n    \"block\": \"Morning\",\n    \"rank\": 1,\n    \"bearing\": \"NNE toward Manhattan Bridge/ESB\",\n    \"whyNow\": \"Arrive pre\\u2011dawn; classic ESB-in-arch alignment.\",\n    \"gear\": \"24\\u201370mm; CPL/ND\",\n    \"settings\": \"Arrive 30\\u201360 min before sunrise; handheld 1/250s+ @ f/5.6\\u20138, ISO 100\\u2013400.\",\n    \"activeAnchor\": 0,\n    \"anchors\": [\n      {\n        \"label\": \"Main view\",\n        \"lat\": 40.7034225,\n        \"lon\": -73.9893714\n      }\n    ],\n    \"micro\": [\n      {\n        \"title\": \"Centerline\",\n        \"r\": 0.0,\n        \"bearing\": 22.5,\n        \"dir\": \"\",\n        \"detail\": \"Main alignment from anchor.\"\n      },\n      {\n        \"title\": \"Step\\u2011back\",\n        \"r\": 10.0,\n        \"bearing\": 22.5,\n        \"dir\": \"\",\n        \"detail\": \"Step back ~10 m; arrow still toward subject.\"\n      },\n      {\n        \"title\": \"Corner curb\",\n        \"r\": 22.0,\n        \"bearing\": 22.5,\n        \"dir\": \"\",\n        \"detail\": \"Diagonal curb vantage; arrow toward subject.\"\n      }\n    ],\n    \"pins\": [\n      {\n        \"title\": \"Parking gap watch\",\n        \"detail\": \"Scan for a temporary gap to remove parked cars; be ready to shoot quickly.\"\n      },\n      {\n        \"title\": \"Reflections after wash\",\n        \"detail\": \"Street or lawn irrigation leaves sheen\\u2014use CPL to control glare.\"\n      },\n      {\n        \"title\": \"Taxi or jogger streaks\",\n        \"detail\": \"If traffic begins, try 1/8\\u20131/2s for motion streaks.\"\n      }\n    ],\n    \"shots\": [\n      {\n        \"title\": \"Establishing wide (16\\u201324mm)\",\n        \"detail\": \"Include context and sky color; keep verticals straight.\"\n      },\n      {\n        \"title\": \"Low angle leading lines\",\n        \"detail\": \"Camera close to ground; emphasize texture or rails.\"\n      },\n      {\n        \"title\": \"Human scale\",\n        \"detail\": \"Single figure walking/running; time the stride.\"\n      },\n      {\n        \"title\": \"Compressed crop (50/70mm)\",\n        \"detail\": \"Use longer end for a clean graphic frame; crop if needed.\"\n      },\n      {\n        \"title\": \"Detail cutaway\",\n        \"detail\": \"Reflections, signage, patterns that summarize place.\"\n      }\n    ]\n  },\n  {\n    \"id\": \"pebble_beach_empire_fulton_ferry\",\n    \"name\": \"Pebble Beach / Empire\\u2013Fulton Ferry\",\n    \"day\": \"2025-10-03\",\n    \"block\": \"Morning\",\n    \"rank\": 2,\n    \"bearing\": \"WSW toward Lower Manhattan\",\n    \"whyNow\": \"Rising tide likely; long exposures for water smoothing.\",\n    \"gear\": \"16\\u201324mm; 3\\u20136\\u2011stop ND; tripod\",\n    \"settings\": \"Arrive 30\\u201360 min before sunrise; handheld 1/250s+ @ f/5.6\\u20138, ISO 100\\u2013400.\",\n    \"activeAnchor\": 0,\n    \"anchors\": [\n      {\n        \"label\": \"Main view\",\n        \"lat\": 40.7041667,\n        \"lon\": -73.9922222\n      }\n    ],\n    \"micro\": [\n      {\n        \"title\": \"Centerline\",\n        \"r\": 0.0,\n        \"bearing\": 247.5,\n        \"dir\": \"\",\n        \"detail\": \"Main alignment from anchor.\"\n      },\n      {\n        \"title\": \"Step\\u2011back\",\n        \"r\": 10.0,\n        \"bearing\": 247.5,\n        \"dir\": \"\",\n        \"detail\": \"Step back ~10 m; arrow still toward subject.\"\n      },\n      {\n        \"title\": \"Corner curb\",\n        \"r\": 22.0,\n        \"bearing\": 247.5,\n        \"dir\": \"\",\n        \"detail\": \"Diagonal curb vantage; arrow toward subject.\"\n      }\n    ],\n    \"pins\": [\n      {\n        \"title\": \"Parking gap watch\",\n        \"detail\": \"Scan for a temporary gap to remove parked cars; be ready to shoot quickly.\"\n      },\n      {\n        \"title\": \"Reflections after wash\",\n        \"detail\": \"Street or lawn irrigation leaves sheen\\u2014use CPL to control glare.\"\n      },\n      {\n        \"title\": \"Taxi or jogger streaks\",\n        \"detail\": \"If traffic begins, try 1/8\\u20131/2s for motion streaks.\"\n      }\n    ],\n    \"shots\": [\n      {\n        \"title\": \"Establishing wide (16\\u201324mm)\",\n        \"detail\": \"Include context and sky color; keep verticals straight.\"\n      },\n      {\n        \"title\": \"Low angle leading lines\",\n        \"detail\": \"Camera close to ground; emphasize texture or rails.\"\n      },\n      {\n        \"title\": \"Human scale\",\n        \"detail\": \"Single figure walking/running; time the stride.\"\n      },\n      {\n        \"title\": \"Compressed crop (50/70mm)\",\n        \"detail\": \"Use longer end for a clean graphic frame; crop if needed.\"\n      },\n      {\n        \"title\": \"Detail cutaway\",\n        \"detail\": \"Reflections, signage, patterns that summarize place.\"\n      }\n    ]\n  },\n  {\n    \"id\": \"brooklyn_heights_promenade\",\n    \"name\": \"Brooklyn Heights Promenade\",\n    \"day\": \"2025-10-03\",\n    \"block\": \"Morning\",\n    \"rank\": 3,\n    \"bearing\": \"WSW across East River\",\n    \"whyNow\": \"Tele compression of skyline; benches and trees for layers.\",\n    \"gear\": \"24\\u201370mm (at 70mm) or 50mm (crop); 24\\u201370mm\",\n    \"settings\": \"Arrive 30\\u201360 min before sunrise; handheld 1/250s+ @ f/5.6\\u20138, ISO 100\\u2013400.\",\n    \"activeAnchor\": 0,\n    \"anchors\": [\n      {\n        \"label\": \"Main view\",\n        \"lat\": 40.6969,\n        \"lon\": -73.9969\n      }\n    ],\n    \"micro\": [\n      {\n        \"title\": \"Centerline\",\n        \"r\": 0.0,\n        \"bearing\": 247.5,\n        \"dir\": \"\",\n        \"detail\": \"Main alignment from anchor.\"\n      },\n      {\n        \"title\": \"Step\\u2011back\",\n        \"r\": 10.0,\n        \"bearing\": 247.5,\n        \"dir\": \"\",\n        \"detail\": \"Step back ~10 m; arrow still toward subject.\"\n      },\n      {\n        \"title\": \"Corner curb\",\n        \"r\": 22.0,\n        \"bearing\": 247.5,\n        \"dir\": \"\",\n        \"detail\": \"Diagonal curb vantage; arrow toward subject.\"\n      }\n    ],\n    \"pins\": [\n      {\n        \"title\": \"Parking gap watch\",\n        \"detail\": \"Scan for a temporary gap to remove parked cars; be ready to shoot quickly.\"\n      },\n      {\n        \"title\": \"Reflections after wash\",\n        \"detail\": \"Street or lawn irrigation leaves sheen\\u2014use CPL to control glare.\"\n      },\n      {\n        \"title\": \"Taxi or jogger streaks\",\n        \"detail\": \"If traffic begins, try 1/8\\u20131/2s for motion streaks.\"\n      }\n    ],\n    \"shots\": [\n      {\n        \"title\": \"Establishing wide (16\\u201324mm)\",\n        \"detail\": \"Include context and sky color; keep verticals straight.\"\n      },\n      {\n        \"title\": \"Low angle leading lines\",\n        \"detail\": \"Camera close to ground; emphasize texture or rails.\"\n      },\n      {\n        \"title\": \"Human scale\",\n        \"detail\": \"Single figure walking/running; time the stride.\"\n      },\n      {\n        \"title\": \"Compressed crop (50/70mm)\",\n        \"detail\": \"Use longer end for a clean graphic frame; crop if needed.\"\n      },\n      {\n        \"title\": \"Detail cutaway\",\n        \"detail\": \"Reflections, signage, patterns that summarize place.\"\n      }\n    ]\n  },\n  {\n    \"id\": \"manhattan_bridge_pedestrian_walkway_south\",\n    \"name\": \"Manhattan Bridge \\u2014 Pedestrian Walkway (south)\",\n    \"day\": \"2025-10-03\",\n    \"block\": \"Morning\",\n    \"rank\": 4,\n    \"bearing\": \"SW toward Financial District\",\n    \"whyNow\": \"Train streaks + skyline through fencing patterns.\",\n    \"gear\": \"24\\u201370mm; mini\\u2011tripod\",\n    \"settings\": \"Arrive 30\\u201360 min before sunrise; handheld 1/250s+ @ f/5.6\\u20138, ISO 100\\u2013400.\",\n    \"activeAnchor\": 0,\n    \"anchors\": [\n      {\n        \"label\": \"Main view\",\n        \"lat\": 40.7132,\n        \"lon\": -73.993\n      }\n    ],\n    \"micro\": [\n      {\n        \"title\": \"Centerline\",\n        \"r\": 0.0,\n        \"bearing\": 225,\n        \"dir\": \"\",\n        \"detail\": \"Main alignment from anchor.\"\n      },\n      {\n        \"title\": \"Step\\u2011back\",\n        \"r\": 10.0,\n        \"bearing\": 225,\n        \"dir\": \"\",\n        \"detail\": \"Step back ~10 m; arrow still toward subject.\"\n      },\n      {\n        \"title\": \"Corner curb\",\n        \"r\": 22.0,\n        \"bearing\": 225,\n        \"dir\": \"\",\n        \"detail\": \"Diagonal curb vantage; arrow toward subject.\"\n      }\n    ],\n    \"pins\": [\n      {\n        \"title\": \"Parking gap watch\",\n        \"detail\": \"Scan for a temporary gap to remove parked cars; be ready to shoot quickly.\"\n      },\n      {\n        \"title\": \"Reflections after wash\",\n        \"detail\": \"Street or lawn irrigation leaves sheen\\u2014use CPL to control glare.\"\n      },\n      {\n        \"title\": \"Taxi or jogger streaks\",\n        \"detail\": \"If traffic begins, try 1/8\\u20131/2s for motion streaks.\"\n      }\n    ],\n    \"shots\": [\n      {\n        \"title\": \"Establishing wide (16\\u201324mm)\",\n        \"detail\": \"Include context and sky color; keep verticals straight.\"\n      },\n      {\n        \"title\": \"Low angle leading lines\",\n        \"detail\": \"Camera close to ground; emphasize texture or rails.\"\n      },\n      {\n        \"title\": \"Human scale\",\n        \"detail\": \"Single figure walking/running; time the stride.\"\n      },\n      {\n        \"title\": \"Compressed crop (50/70mm)\",\n        \"detail\": \"Use longer end for a clean graphic frame; crop if needed.\"\n      },\n      {\n        \"title\": \"Detail cutaway\",\n        \"detail\": \"Reflections, signage, patterns that summarize place.\"\n      }\n    ]\n  },\n  {\n    \"id\": \"brooklyn_bridge_walkway_center_spans\",\n    \"name\": \"Brooklyn Bridge \\u2014 Walkway (center spans)\",\n    \"day\": \"2025-10-03\",\n    \"block\": \"Morning\",\n    \"rank\": 5,\n    \"bearing\": \"WNW toward Lower Manhattan\",\n    \"whyNow\": \"Cable symmetry; low angle wood planks foreground.\",\n    \"gear\": \"16\\u201324mm; clamp\",\n    \"settings\": \"Arrive 30\\u201360 min before sunrise; handheld 1/250s+ @ f/5.6\\u20138, ISO 100\\u2013400.\",\n    \"activeAnchor\": 0,\n    \"anchors\": [\n      {\n        \"label\": \"Main view\",\n        \"lat\": 40.7067,\n        \"lon\": -73.9967\n      }\n    ],\n    \"micro\": [\n      {\n        \"title\": \"Centerline\",\n        \"r\": 0.0,\n        \"bearing\": 292.5,\n        \"dir\": \"\",\n        \"detail\": \"Main alignment from anchor.\"\n      },\n      {\n        \"title\": \"Step\\u2011back\",\n        \"r\": 10.0,\n        \"bearing\": 292.5,\n        \"dir\": \"\",\n        \"detail\": \"Step back ~10 m; arrow still toward subject.\"\n      },\n      {\n        \"title\": \"Corner curb\",\n        \"r\": 22.0,\n        \"bearing\": 292.5,\n        \"dir\": \"\",\n        \"detail\": \"Diagonal curb vantage; arrow toward subject.\"\n      }\n    ],\n    \"pins\": [\n      {\n        \"title\": \"Parking gap watch\",\n        \"detail\": \"Scan for a temporary gap to remove parked cars; be ready to shoot quickly.\"\n      },\n      {\n        \"title\": \"Reflections after wash\",\n        \"detail\": \"Street or lawn irrigation leaves sheen\\u2014use CPL to control glare.\"\n      },\n      {\n        \"title\": \"Taxi or jogger streaks\",\n        \"detail\": \"If traffic begins, try 1/8\\u20131/2s for motion streaks.\"\n      }\n    ],\n    \"shots\": [\n      {\n        \"title\": \"Establishing wide (16\\u201324mm)\",\n        \"detail\": \"Include context and sky color; keep verticals straight.\"\n      },\n      {\n        \"title\": \"Low angle leading lines\",\n        \"detail\": \"Camera close to ground; emphasize texture or rails.\"\n      },\n      {\n        \"title\": \"Human scale\",\n        \"detail\": \"Single figure walking/running; time the stride.\"\n      },\n      {\n        \"title\": \"Compressed crop (50/70mm)\",\n        \"detail\": \"Use longer end for a clean graphic frame; crop if needed.\"\n      },\n      {\n        \"title\": \"Detail cutaway\",\n        \"detail\": \"Reflections, signage, patterns that summarize place.\"\n      }\n    ]\n  },\n  {\n    \"id\": \"grand_central_terminal_main_concourse\",\n    \"name\": \"Grand Central Terminal \\u2014 Main Concourse\",\n    \"day\": \"2025-10-03\",\n    \"block\": \"Afternoon\",\n    \"rank\": 1,\n    \"bearing\": \"Interior (multi)\",\n    \"whyNow\": \"Motion blur at 1/4\\u20131/2s; tripods require permit.\",\n    \"gear\": \"16\\u201324mm; fast 35/50mm\",\n    \"settings\": \"Work shade and geometry; CPL for glare; 1/250s+ @ f/5.6\\u20138.\",\n    \"activeAnchor\": 0,\n    \"anchors\": [\n      {\n        \"label\": \"Main view\",\n        \"lat\": 40.75278,\n        \"lon\": -73.97722\n      }\n    ],\n    \"micro\": [\n      {\n        \"title\": \"Centerline\",\n        \"r\": 0.0,\n        \"bearing\": 0.0,\n        \"dir\": \"\",\n        \"detail\": \"Main alignment from anchor.\"\n      },\n      {\n        \"title\": \"Step\\u2011back\",\n        \"r\": 10.0,\n        \"bearing\": 0.0,\n        \"dir\": \"\",\n        \"detail\": \"Step back ~10 m; arrow still toward subject.\"\n      },\n      {\n        \"title\": \"Corner curb\",\n        \"r\": 22.0,\n        \"bearing\": 0.0,\n        \"dir\": \"\",\n        \"detail\": \"Diagonal curb vantage; arrow toward subject.\"\n      }\n    ],\n    \"pins\": [\n      {\n        \"title\": \"Shadow geometry\",\n        \"detail\": \"Look for repeating cast-iron, stoops, or rails to form patterns.\"\n      },\n      {\n        \"title\": \"Street portrait moment\",\n        \"detail\": \"Use 35/50mm for environmental portraits; ask politely.\"\n      },\n      {\n        \"title\": \"Compression detail\",\n        \"detail\": \"Use the 70mm end of 24\\u201370; crop if needed for stronger layers.\"\n      }\n    ],\n    \"shots\": [\n      {\n        \"title\": \"Shadow lattice (24\\u201370mm)\",\n        \"detail\": \"Catch window/railing shadows making a grid or stripes.\"\n      },\n      {\n        \"title\": \"Corner portrait (35/50mm)\",\n        \"detail\": \"Subject on edge of light; background in soft shade.\"\n      },\n      {\n        \"title\": \"Texture macro (50mm)\",\n        \"detail\": \"Look for worn stone/metal details; low ISO, high f\\u2011stop.\"\n      },\n      {\n        \"title\": \"Layered street (70mm)\",\n        \"detail\": \"Stack elements; shoot through foreground.\"\n      },\n      {\n        \"title\": \"Signage type\",\n        \"detail\": \"Tight crop of iconic typography or tile work.\"\n      }\n    ]\n  },\n  {\n    \"id\": \"nypl_main_branch_stephen_a_schwarzman\",\n    \"name\": \"NYPL Main Branch (Stephen A. Schwarzman)\",\n    \"day\": \"2025-10-03\",\n    \"block\": \"Afternoon\",\n    \"rank\": 2,\n    \"bearing\": \"E/W fa\\u00e7ades; interior symmetry\",\n    \"whyNow\": \"No flash/tripods inside; quiet portraits on steps.\",\n    \"gear\": \"24\\u201370mm; fast 35mm\",\n    \"settings\": \"Work shade and geometry; CPL for glare; 1/250s+ @ f/5.6\\u20138.\",\n    \"activeAnchor\": 0,\n    \"anchors\": [\n      {\n        \"label\": \"Main view\",\n        \"lat\": 40.7532,\n        \"lon\": -73.9822\n      }\n    ],\n    \"micro\": [\n      {\n        \"title\": \"Centerline\",\n        \"r\": 0.0,\n        \"bearing\": 90,\n        \"dir\": \"\",\n        \"detail\": \"Main alignment from anchor.\"\n      },\n      {\n        \"title\": \"Step\\u2011back\",\n        \"r\": 10.0,\n        \"bearing\": 90,\n        \"dir\": \"\",\n        \"detail\": \"Step back ~10 m; arrow still toward subject.\"\n      },\n      {\n        \"title\": \"Corner curb\",\n        \"r\": 22.0,\n        \"bearing\": 90,\n        \"dir\": \"\",\n        \"detail\": \"Diagonal curb vantage; arrow toward subject.\"\n      }\n    ],\n    \"pins\": [\n      {\n        \"title\": \"Shadow geometry\",\n        \"detail\": \"Look for repeating cast-iron, stoops, or rails to form patterns.\"\n      },\n      {\n        \"title\": \"Street portrait moment\",\n        \"detail\": \"Use 35/50mm for environmental portraits; ask politely.\"\n      },\n      {\n        \"title\": \"Compression detail\",\n        \"detail\": \"Use the 70mm end of 24\\u201370; crop if needed for stronger layers.\"\n      }\n    ],\n    \"shots\": [\n      {\n        \"title\": \"Shadow lattice (24\\u201370mm)\",\n        \"detail\": \"Catch window/railing shadows making a grid or stripes.\"\n      },\n      {\n        \"title\": \"Corner portrait (35/50mm)\",\n        \"detail\": \"Subject on edge of light; background in soft shade.\"\n      },\n      {\n        \"title\": \"Texture macro (50mm)\",\n        \"detail\": \"Look for worn stone/metal details; low ISO, high f\\u2011stop.\"\n      },\n      {\n        \"title\": \"Layered street (70mm)\",\n        \"detail\": \"Stack elements; shoot through foreground.\"\n      },\n      {\n        \"title\": \"Signage type\",\n        \"detail\": \"Tight crop of iconic typography or tile work.\"\n      }\n    ]\n  },\n  {\n    \"id\": \"flatiron_district_23rd_broadway\",\n    \"name\": \"Flatiron District (23rd & Broadway)\",\n    \"day\": \"2025-10-03\",\n    \"block\": \"Afternoon\",\n    \"rank\": 3,\n    \"bearing\": \"NNE along 5th Ave\",\n    \"whyNow\": \"Median for wedge composition; daytime streaks with ND.\",\n    \"gear\": \"24\\u201370mm; 24\\u201370mm (at 70mm) or 50mm (crop); ND\",\n    \"settings\": \"Work shade and geometry; CPL for glare; 1/250s+ @ f/5.6\\u20138.\",\n    \"activeAnchor\": 0,\n    \"anchors\": [\n      {\n        \"label\": \"Main view\",\n        \"lat\": 40.7411,\n        \"lon\": -73.9897\n      }\n    ],\n    \"micro\": [\n      {\n        \"title\": \"Centerline\",\n        \"r\": 0.0,\n        \"bearing\": 22.5,\n        \"dir\": \"\",\n        \"detail\": \"Main alignment from anchor.\"\n      },\n      {\n        \"title\": \"Step\\u2011back\",\n        \"r\": 10.0,\n        \"bearing\": 22.5,\n        \"dir\": \"\",\n        \"detail\": \"Step back ~10 m; arrow still toward subject.\"\n      },\n      {\n        \"title\": \"Corner curb\",\n        \"r\": 22.0,\n        \"bearing\": 22.5,\n        \"dir\": \"\",\n        \"detail\": \"Diagonal curb vantage; arrow toward subject.\"\n      }\n    ],\n    \"pins\": [\n      {\n        \"title\": \"Shadow geometry\",\n        \"detail\": \"Look for repeating cast-iron, stoops, or rails to form patterns.\"\n      },\n      {\n        \"title\": \"Street portrait moment\",\n        \"detail\": \"Use 35/50mm for environmental portraits; ask politely.\"\n      },\n      {\n        \"title\": \"Compression detail\",\n        \"detail\": \"Use the 70mm end of 24\\u201370; crop if needed for stronger layers.\"\n      }\n    ],\n    \"shots\": [\n      {\n        \"title\": \"Shadow lattice (24\\u201370mm)\",\n        \"detail\": \"Catch window/railing shadows making a grid or stripes.\"\n      },\n      {\n        \"title\": \"Corner portrait (35/50mm)\",\n        \"detail\": \"Subject on edge of light; background in soft shade.\"\n      },\n      {\n        \"title\": \"Texture macro (50mm)\",\n        \"detail\": \"Look for worn stone/metal details; low ISO, high f\\u2011stop.\"\n      },\n      {\n        \"title\": \"Layered street (70mm)\",\n        \"detail\": \"Stack elements; shoot through foreground.\"\n      },\n      {\n        \"title\": \"Signage type\",\n        \"detail\": \"Tight crop of iconic typography or tile work.\"\n      }\n    ]\n  },\n  {\n    \"id\": \"the_oculus_wtc_plaza\",\n    \"name\": \"The Oculus & WTC Plaza\",\n    \"day\": \"2025-10-03\",\n    \"block\": \"Afternoon\",\n    \"rank\": 4,\n    \"bearing\": \"Interior/exterior ribs\",\n    \"whyNow\": \"Symmetry studies; security may restrict tripods inside.\",\n    \"gear\": \"16\\u201324mm; 24\\u201370mm\",\n    \"settings\": \"Work shade and geometry; CPL for glare; 1/250s+ @ f/5.6\\u20138.\",\n    \"activeAnchor\": 0,\n    \"anchors\": [\n      {\n        \"label\": \"Main view\",\n        \"lat\": 40.7126,\n        \"lon\": -74.0098\n      }\n    ],\n    \"micro\": [\n      {\n        \"title\": \"Centerline\",\n        \"r\": 0.0,\n        \"bearing\": 0.0,\n        \"dir\": \"\",\n        \"detail\": \"Main alignment from anchor.\"\n      },\n      {\n        \"title\": \"Step\\u2011back\",\n        \"r\": 10.0,\n        \"bearing\": 0.0,\n        \"dir\": \"\",\n        \"detail\": \"Step back ~10 m; arrow still toward subject.\"\n      },\n      {\n        \"title\": \"Corner curb\",\n        \"r\": 22.0,\n        \"bearing\": 0.0,\n        \"dir\": \"\",\n        \"detail\": \"Diagonal curb vantage; arrow toward subject.\"\n      }\n    ],\n    \"pins\": [\n      {\n        \"title\": \"Shadow geometry\",\n        \"detail\": \"Look for repeating cast-iron, stoops, or rails to form patterns.\"\n      },\n      {\n        \"title\": \"Street portrait moment\",\n        \"detail\": \"Use 35/50mm for environmental portraits; ask politely.\"\n      },\n      {\n        \"title\": \"Compression detail\",\n        \"detail\": \"Use the 70mm end of 24\\u201370; crop if needed for stronger layers.\"\n      }\n    ],\n    \"shots\": [\n      {\n        \"title\": \"Shadow lattice (24\\u201370mm)\",\n        \"detail\": \"Catch window/railing shadows making a grid or stripes.\"\n      },\n      {\n        \"title\": \"Corner portrait (35/50mm)\",\n        \"detail\": \"Subject on edge of light; background in soft shade.\"\n      },\n      {\n        \"title\": \"Texture macro (50mm)\",\n        \"detail\": \"Look for worn stone/metal details; low ISO, high f\\u2011stop.\"\n      },\n      {\n        \"title\": \"Layered street (70mm)\",\n        \"detail\": \"Stack elements; shoot through foreground.\"\n      },\n      {\n        \"title\": \"Signage type\",\n        \"detail\": \"Tight crop of iconic typography or tile work.\"\n      }\n    ]\n  },\n  {\n    \"id\": \"the_high_line_10th_ave_overlook_spur\",\n    \"name\": \"The High Line \\u2014 10th Ave Overlook / Spur\",\n    \"day\": \"2025-10-03\",\n    \"block\": \"Afternoon\",\n    \"rank\": 5,\n    \"bearing\": \"W to Hudson; S/N along 10th Ave\",\n    \"whyNow\": \"Sun slicing between buildings; framed street scenes.\",\n    \"gear\": \"24\\u201370mm; 24\\u201370mm (at 70mm) or 50mm (crop)\",\n    \"settings\": \"Work shade and geometry; CPL for glare; 1/250s+ @ f/5.6\\u20138.\",\n    \"activeAnchor\": 0,\n    \"anchors\": [\n      {\n        \"label\": \"Main view\",\n        \"lat\": 40.7425,\n        \"lon\": -74.0061\n      }\n    ],\n    \"micro\": [\n      {\n        \"title\": \"Centerline\",\n        \"r\": 0.0,\n        \"bearing\": 270,\n        \"dir\": \"\",\n        \"detail\": \"Main alignment from anchor.\"\n      },\n      {\n        \"title\": \"Step\\u2011back\",\n        \"r\": 10.0,\n        \"bearing\": 270,\n        \"dir\": \"\",\n        \"detail\": \"Step back ~10 m; arrow still toward subject.\"\n      },\n      {\n        \"title\": \"Corner curb\",\n        \"r\": 22.0,\n        \"bearing\": 270,\n        \"dir\": \"\",\n        \"detail\": \"Diagonal curb vantage; arrow toward subject.\"\n      }\n    ],\n    \"pins\": [\n      {\n        \"title\": \"Shadow geometry\",\n        \"detail\": \"Look for repeating cast-iron, stoops, or rails to form patterns.\"\n      },\n      {\n        \"title\": \"Street portrait moment\",\n        \"detail\": \"Use 35/50mm for environmental portraits; ask politely.\"\n      },\n      {\n        \"title\": \"Compression detail\",\n        \"detail\": \"Use the 70mm end of 24\\u201370; crop if needed for stronger layers.\"\n      }\n    ],\n    \"shots\": [\n      {\n        \"title\": \"Shadow lattice (24\\u201370mm)\",\n        \"detail\": \"Catch window/railing shadows making a grid or stripes.\"\n      },\n      {\n        \"title\": \"Corner portrait (35/50mm)\",\n        \"detail\": \"Subject on edge of light; background in soft shade.\"\n      },\n      {\n        \"title\": \"Texture macro (50mm)\",\n        \"detail\": \"Look for worn stone/metal details; low ISO, high f\\u2011stop.\"\n      },\n      {\n        \"title\": \"Layered street (70mm)\",\n        \"detail\": \"Stack elements; shoot through foreground.\"\n      },\n      {\n        \"title\": \"Signage type\",\n        \"detail\": \"Tight crop of iconic typography or tile work.\"\n      }\n    ]\n  },\n  {\n    \"id\": \"top_of_the_rock_observation_deck\",\n    \"name\": \"Top of the Rock \\u2014 Observation Deck\",\n    \"day\": \"2025-10-03\",\n    \"block\": \"Evening\",\n    \"rank\": 1,\n    \"bearing\": \"W & S (sunset, ESB)\",\n    \"whyNow\": \"Arrive 60\\u201390 min pre\\u2011sunset; no tripods on deck.\",\n    \"gear\": \"16\\u201324mm; 24\\u201370mm; cloth\",\n    \"settings\": \"Blue-hour blend; 1/60\\u20131s @ f/5.6\\u20138, ISO 100\\u2013800; bracketing if needed.\",\n    \"activeAnchor\": 0,\n    \"anchors\": [\n      {\n        \"label\": \"Main view\",\n        \"lat\": 40.7591,\n        \"lon\": -73.9795\n      }\n    ],\n    \"micro\": [\n      {\n        \"title\": \"Centerline\",\n        \"r\": 0.0,\n        \"bearing\": 270,\n        \"dir\": \"\",\n        \"detail\": \"Main alignment from anchor.\"\n      },\n      {\n        \"title\": \"Step\\u2011back\",\n        \"r\": 10.0,\n        \"bearing\": 270,\n        \"dir\": \"\",\n        \"detail\": \"Step back ~10 m; arrow still toward subject.\"\n      },\n      {\n        \"title\": \"Corner curb\",\n        \"r\": 22.0,\n        \"bearing\": 270,\n        \"dir\": \"\",\n        \"detail\": \"Diagonal curb vantage; arrow toward subject.\"\n      }\n    ],\n    \"pins\": [\n      {\n        \"title\": \"Blue-hour reflections\",\n        \"detail\": \"Arrive 45\\u201375 min before sunset; water calms near high tide.\"\n      },\n      {\n        \"title\": \"Silhouette walkers\",\n        \"detail\": \"Expose for sky; use crosswalks as a stage.\"\n      },\n      {\n        \"title\": \"Ferry or car streaks\",\n        \"detail\": \"1\\u20132s for ferries/traffic; tripod or brace on railing.\"\n      }\n    ],\n    \"shots\": [\n      {\n        \"title\": \"Blue-hour skyline (16\\u201324mm)\",\n        \"detail\": \"Balance ambient & city lights; 10\\u201320 min after sunset.\"\n      },\n      {\n        \"title\": \"Silhouette frame (35/50mm)\",\n        \"detail\": \"Backlight against sky/water; faster shutter.\"\n      },\n      {\n        \"title\": \"Symmetry (24\\u201370mm)\",\n        \"detail\": \"Use bridges/arches/railings; centered composition.\"\n      },\n      {\n        \"title\": \"Panning ferry (1/8\\u20131/4s)\",\n        \"detail\": \"Follow motion for streaky yet readable subject.\"\n      },\n      {\n        \"title\": \"Detail twinkle\",\n        \"detail\": \"Tight crop on lights/signs; sparkle highlights.\"\n      }\n    ]\n  },\n  {\n    \"id\": \"gapstow_bridge_central_park\",\n    \"name\": \"Gapstow Bridge \\u2014 Central Park\",\n    \"day\": \"2025-10-03\",\n    \"block\": \"Evening\",\n    \"rank\": 2,\n    \"bearing\": \"NW toward Midtown\",\n    \"whyNow\": \"Shoreline for reflections; silhouettes on bridge.\",\n    \"gear\": \"24\\u201370mm (at 70mm) or 50mm (crop); 35mm; CPL\",\n    \"settings\": \"Blue-hour blend; 1/60\\u20131s @ f/5.6\\u20138, ISO 100\\u2013800; bracketing if needed.\",\n    \"activeAnchor\": 0,\n    \"anchors\": [\n      {\n        \"label\": \"Main view\",\n        \"lat\": 40.7641,\n        \"lon\": -73.9739\n      }\n    ],\n    \"micro\": [\n      {\n        \"title\": \"Centerline\",\n        \"r\": 0.0,\n        \"bearing\": 315,\n        \"dir\": \"\",\n        \"detail\": \"Main alignment from anchor.\"\n      },\n      {\n        \"title\": \"Step\\u2011back\",\n        \"r\": 10.0,\n        \"bearing\": 315,\n        \"dir\": \"\",\n        \"detail\": \"Step back ~10 m; arrow still toward subject.\"\n      },\n      {\n        \"title\": \"Corner curb\",\n        \"r\": 22.0,\n        \"bearing\": 315,\n        \"dir\": \"\",\n        \"detail\": \"Diagonal curb vantage; arrow toward subject.\"\n      }\n    ],\n    \"pins\": [\n      {\n        \"title\": \"Blue-hour reflections\",\n        \"detail\": \"Arrive 45\\u201375 min before sunset; water calms near high tide.\"\n      },\n      {\n        \"title\": \"Silhouette walkers\",\n        \"detail\": \"Expose for sky; use crosswalks as a stage.\"\n      },\n      {\n        \"title\": \"Ferry or car streaks\",\n        \"detail\": \"1\\u20132s for ferries/traffic; tripod or brace on railing.\"\n      }\n    ],\n    \"shots\": [\n      {\n        \"title\": \"Blue-hour skyline (16\\u201324mm)\",\n        \"detail\": \"Balance ambient & city lights; 10\\u201320 min after sunset.\"\n      },\n      {\n        \"title\": \"Silhouette frame (35/50mm)\",\n        \"detail\": \"Backlight against sky/water; faster shutter.\"\n      },\n      {\n        \"title\": \"Symmetry (24\\u201370mm)\",\n        \"detail\": \"Use bridges/arches/railings; centered composition.\"\n      },\n      {\n        \"title\": \"Panning ferry (1/8\\u20131/4s)\",\n        \"detail\": \"Follow motion for streaky yet readable subject.\"\n      },\n      {\n        \"title\": \"Detail twinkle\",\n        \"detail\": \"Tight crop on lights/signs; sparkle highlights.\"\n      }\n    ]\n  },\n  {\n    \"id\": \"brooklyn_bridge_park_pier_1_pilings\",\n    \"name\": \"Brooklyn Bridge Park \\u2014 Pier 1 (Pilings)\",\n    \"day\": \"2025-10-03\",\n    \"block\": \"Evening\",\n    \"rank\": 3,\n    \"bearing\": \"WSW to skyline\",\n    \"whyNow\": \"Repeating pilings foreground; ferry streaks at blue hour.\",\n    \"gear\": \"16\\u201324mm; ND; tripod\",\n    \"settings\": \"Blue-hour blend; 1/60\\u20131s @ f/5.6\\u20138, ISO 100\\u2013800; bracketing if needed.\",\n    \"activeAnchor\": 0,\n    \"anchors\": [\n      {\n        \"label\": \"Main view\",\n        \"lat\": 40.7021,\n        \"lon\": -73.9969\n      }\n    ],\n    \"micro\": [\n      {\n        \"title\": \"Centerline\",\n        \"r\": 0.0,\n        \"bearing\": 247.5,\n        \"dir\": \"\",\n        \"detail\": \"Main alignment from anchor.\"\n      },\n      {\n        \"title\": \"Step\\u2011back\",\n        \"r\": 10.0,\n        \"bearing\": 247.5,\n        \"dir\": \"\",\n        \"detail\": \"Step back ~10 m; arrow still toward subject.\"\n      },\n      {\n        \"title\": \"Corner curb\",\n        \"r\": 22.0,\n        \"bearing\": 247.5,\n        \"dir\": \"\",\n        \"detail\": \"Diagonal curb vantage; arrow toward subject.\"\n      }\n    ],\n    \"pins\": [\n      {\n        \"title\": \"Blue-hour reflections\",\n        \"detail\": \"Arrive 45\\u201375 min before sunset; water calms near high tide.\"\n      },\n      {\n        \"title\": \"Silhouette walkers\",\n        \"detail\": \"Expose for sky; use crosswalks as a stage.\"\n      },\n      {\n        \"title\": \"Ferry or car streaks\",\n        \"detail\": \"1\\u20132s for ferries/traffic; tripod or brace on railing.\"\n      }\n    ],\n    \"shots\": [\n      {\n        \"title\": \"Blue-hour skyline (16\\u201324mm)\",\n        \"detail\": \"Balance ambient & city lights; 10\\u201320 min after sunset.\"\n      },\n      {\n        \"title\": \"Silhouette frame (35/50mm)\",\n        \"detail\": \"Backlight against sky/water; faster shutter.\"\n      },\n      {\n        \"title\": \"Symmetry (24\\u201370mm)\",\n        \"detail\": \"Use bridges/arches/railings; centered composition.\"\n      },\n      {\n        \"title\": \"Panning ferry (1/8\\u20131/4s)\",\n        \"detail\": \"Follow motion for streaky yet readable subject.\"\n      },\n      {\n        \"title\": \"Detail twinkle\",\n        \"detail\": \"Tight crop on lights/signs; sparkle highlights.\"\n      }\n    ]\n  },\n  {\n    \"id\": \"roosevelt_island_tram_queensboro_bridge\",\n    \"name\": \"Roosevelt Island Tram & Queensboro Bridge\",\n    \"day\": \"2025-10-03\",\n    \"block\": \"Evening\",\n    \"rank\": 4,\n    \"bearing\": \"W toward Midtown\",\n    \"whyNow\": \"Tram motion blur; bridge tower geometry.\",\n    \"gear\": \"24\\u201370mm; 24\\u201370mm (at 70mm) or 50mm (crop)\",\n    \"settings\": \"Blue-hour blend; 1/60\\u20131s @ f/5.6\\u20138, ISO 100\\u2013800; bracketing if needed.\",\n    \"activeAnchor\": 0,\n    \"anchors\": [\n      {\n        \"label\": \"Main view\",\n        \"lat\": 40.7615,\n        \"lon\": -73.9597\n      }\n    ],\n    \"micro\": [\n      {\n        \"title\": \"Centerline\",\n        \"r\": 0.0,\n        \"bearing\": 270,\n        \"dir\": \"\",\n        \"detail\": \"Main alignment from anchor.\"\n      },\n      {\n        \"title\": \"Step\\u2011back\",\n        \"r\": 10.0,\n        \"bearing\": 270,\n        \"dir\": \"\",\n        \"detail\": \"Step back ~10 m; arrow still toward subject.\"\n      },\n      {\n        \"title\": \"Corner curb\",\n        \"r\": 22.0,\n        \"bearing\": 270,\n        \"dir\": \"\",\n        \"detail\": \"Diagonal curb vantage; arrow toward subject.\"\n      }\n    ],\n    \"pins\": [\n      {\n        \"title\": \"Blue-hour reflections\",\n        \"detail\": \"Arrive 45\\u201375 min before sunset; water calms near high tide.\"\n      },\n      {\n        \"title\": \"Silhouette walkers\",\n        \"detail\": \"Expose for sky; use crosswalks as a stage.\"\n      },\n      {\n        \"title\": \"Ferry or car streaks\",\n        \"detail\": \"1\\u20132s for ferries/traffic; tripod or brace on railing.\"\n      }\n    ],\n    \"shots\": [\n      {\n        \"title\": \"Blue-hour skyline (16\\u201324mm)\",\n        \"detail\": \"Balance ambient & city lights; 10\\u201320 min after sunset.\"\n      },\n      {\n        \"title\": \"Silhouette frame (35/50mm)\",\n        \"detail\": \"Backlight against sky/water; faster shutter.\"\n      },\n      {\n        \"title\": \"Symmetry (24\\u201370mm)\",\n        \"detail\": \"Use bridges/arches/railings; centered composition.\"\n      },\n      {\n        \"title\": \"Panning ferry (1/8\\u20131/4s)\",\n        \"detail\": \"Follow motion for streaky yet readable subject.\"\n      },\n      {\n        \"title\": \"Detail twinkle\",\n        \"detail\": \"Tight crop on lights/signs; sparkle highlights.\"\n      }\n    ]\n  },\n  {\n    \"id\": \"belvedere_castle_turtle_pond\",\n    \"name\": \"Belvedere Castle & Turtle Pond\",\n    \"day\": \"2025-10-03\",\n    \"block\": \"Evening\",\n    \"rank\": 5,\n    \"bearing\": \"SE/NW options\",\n    \"whyNow\": \"Castle silhouettes; pond reflections as light drops.\",\n    \"gear\": \"24\\u201370mm; 16\\u201324mm\",\n    \"settings\": \"Blue-hour blend; 1/60\\u20131s @ f/5.6\\u20138, ISO 100\\u2013800; bracketing if needed.\",\n    \"activeAnchor\": 0,\n    \"anchors\": [\n      {\n        \"label\": \"Main view\",\n        \"lat\": 40.7794,\n        \"lon\": -73.969\n      }\n    ],\n    \"micro\": [\n      {\n        \"title\": \"Centerline\",\n        \"r\": 0.0,\n        \"bearing\": 135,\n        \"dir\": \"\",\n        \"detail\": \"Main alignment from anchor.\"\n      },\n      {\n        \"title\": \"Step\\u2011back\",\n        \"r\": 10.0,\n        \"bearing\": 135,\n        \"dir\": \"\",\n        \"detail\": \"Step back ~10 m; arrow still toward subject.\"\n      },\n      {\n        \"title\": \"Corner curb\",\n        \"r\": 22.0,\n        \"bearing\": 135,\n        \"dir\": \"\",\n        \"detail\": \"Diagonal curb vantage; arrow toward subject.\"\n      }\n    ],\n    \"pins\": [\n      {\n        \"title\": \"Blue-hour reflections\",\n        \"detail\": \"Arrive 45\\u201375 min before sunset; water calms near high tide.\"\n      },\n      {\n        \"title\": \"Silhouette walkers\",\n        \"detail\": \"Expose for sky; use crosswalks as a stage.\"\n      },\n      {\n        \"title\": \"Ferry or car streaks\",\n        \"detail\": \"1\\u20132s for ferries/traffic; tripod or brace on railing.\"\n      }\n    ],\n    \"shots\": [\n      {\n        \"title\": \"Blue-hour skyline (16\\u201324mm)\",\n        \"detail\": \"Balance ambient & city lights; 10\\u201320 min after sunset.\"\n      },\n      {\n        \"title\": \"Silhouette frame (35/50mm)\",\n        \"detail\": \"Backlight against sky/water; faster shutter.\"\n      },\n      {\n        \"title\": \"Symmetry (24\\u201370mm)\",\n        \"detail\": \"Use bridges/arches/railings; centered composition.\"\n      },\n      {\n        \"title\": \"Panning ferry (1/8\\u20131/4s)\",\n        \"detail\": \"Follow motion for streaky yet readable subject.\"\n      },\n      {\n        \"title\": \"Detail twinkle\",\n        \"detail\": \"Tight crop on lights/signs; sparkle highlights.\"\n      }\n    ]\n  },\n  {\n    \"id\": \"times_square_duffy_square\",\n    \"name\": \"Times Square \\u2014 Duffy Square\",\n    \"day\": \"2025-10-03\",\n    \"block\": \"Night\",\n    \"rank\": 1,\n    \"bearing\": \"Broadway & 7th Ave\",\n    \"whyNow\": \"Neon people blur 4\\u201310s; portraits at f/1.8\\u20132.8.\",\n    \"gear\": \"24\\u201370mm; fast 50mm; mini\\u2011tripod\",\n    \"settings\": \"Tripod: 1\\u201310s @ f/6.3\\u20138, ISO 100\\u2013400; expose for highlights.\",\n    \"activeAnchor\": 0,\n    \"anchors\": [\n      {\n        \"label\": \"Main view\",\n        \"lat\": 40.758,\n        \"lon\": -73.9855\n      }\n    ],\n    \"micro\": [\n      {\n        \"title\": \"Centerline\",\n        \"r\": 0.0,\n        \"bearing\": 0.0,\n        \"dir\": \"\",\n        \"detail\": \"Main alignment from anchor.\"\n      },\n      {\n        \"title\": \"Step\\u2011back\",\n        \"r\": 10.0,\n        \"bearing\": 0.0,\n        \"dir\": \"\",\n        \"detail\": \"Step back ~10 m; arrow still toward subject.\"\n      },\n      {\n        \"title\": \"Corner curb\",\n        \"r\": 22.0,\n        \"bearing\": 0.0,\n        \"dir\": \"\",\n        \"detail\": \"Diagonal curb vantage; arrow toward subject.\"\n      }\n    ],\n    \"pins\": [\n      {\n        \"title\": \"Clean tripod placement\",\n        \"detail\": \"Stay behind safety lines; avoid blocking paths.\"\n      },\n      {\n        \"title\": \"Neon trails\",\n        \"detail\": \"1\\u20134s exposures; wait for buses to paint the frame.\"\n      },\n      {\n        \"title\": \"Skyline mirror\",\n        \"detail\": \"Use 16\\u201324 for big scene; 50mm for graphic details.\"\n      }\n    ],\n    \"shots\": [\n      {\n        \"title\": \"Long exposure base (16\\u201324mm)\",\n        \"detail\": \"1\\u201310s; shoot 10\\u201320 frames; pick best trails.\"\n      },\n      {\n        \"title\": \"Tele crop (50/70mm)\",\n        \"detail\": \"Abstract geometry; isolate building tops.\"\n      },\n      {\n        \"title\": \"Reflections\",\n        \"detail\": \"Find puddles or river edges; go low for mirror.\"\n      },\n      {\n        \"title\": \"People blur (1\\u20132s)\",\n        \"detail\": \"Trace flows of commuters without losing structure.\"\n      },\n      {\n        \"title\": \"Icon detail\",\n        \"detail\": \"Tight shot of recognizable element to close the set.\"\n      }\n    ]\n  },\n  {\n    \"id\": \"tudor_city_overpass_e_42nd_st\",\n    \"name\": \"Tudor City Overpass (E 42nd St)\",\n    \"day\": \"2025-10-03\",\n    \"block\": \"Night\",\n    \"rank\": 2,\n    \"bearing\": \"WSW down 42nd St\",\n    \"whyNow\": \"Chrysler crown + headlight trails 8\\u201320s.\",\n    \"gear\": \"24\\u201370mm (at 70mm) or 50mm (crop); tripod; remote\",\n    \"settings\": \"Tripod: 1\\u201310s @ f/6.3\\u20138, ISO 100\\u2013400; expose for highlights.\",\n    \"activeAnchor\": 0,\n    \"anchors\": [\n      {\n        \"label\": \"Main view\",\n        \"lat\": 40.7495,\n        \"lon\": -73.9725\n      }\n    ],\n    \"micro\": [\n      {\n        \"title\": \"Centerline\",\n        \"r\": 0.0,\n        \"bearing\": 247.5,\n        \"dir\": \"\",\n        \"detail\": \"Main alignment from anchor.\"\n      },\n      {\n        \"title\": \"Step\\u2011back\",\n        \"r\": 10.0,\n        \"bearing\": 247.5,\n        \"dir\": \"\",\n        \"detail\": \"Step back ~10 m; arrow still toward subject.\"\n      },\n      {\n        \"title\": \"Corner curb\",\n        \"r\": 22.0,\n        \"bearing\": 247.5,\n        \"dir\": \"\",\n        \"detail\": \"Diagonal curb vantage; arrow toward subject.\"\n      }\n    ],\n    \"pins\": [\n      {\n        \"title\": \"Clean tripod placement\",\n        \"detail\": \"Stay behind safety lines; avoid blocking paths.\"\n      },\n      {\n        \"title\": \"Neon trails\",\n        \"detail\": \"1\\u20134s exposures; wait for buses to paint the frame.\"\n      },\n      {\n        \"title\": \"Skyline mirror\",\n        \"detail\": \"Use 16\\u201324 for big scene; 50mm for graphic details.\"\n      }\n    ],\n    \"shots\": [\n      {\n        \"title\": \"Long exposure base (16\\u201324mm)\",\n        \"detail\": \"1\\u201310s; shoot 10\\u201320 frames; pick best trails.\"\n      },\n      {\n        \"title\": \"Tele crop (50/70mm)\",\n        \"detail\": \"Abstract geometry; isolate building tops.\"\n      },\n      {\n        \"title\": \"Reflections\",\n        \"detail\": \"Find puddles or river edges; go low for mirror.\"\n      },\n      {\n        \"title\": \"People blur (1\\u20132s)\",\n        \"detail\": \"Trace flows of commuters without losing structure.\"\n      },\n      {\n        \"title\": \"Icon detail\",\n        \"detail\": \"Tight shot of recognizable element to close the set.\"\n      }\n    ]\n  },\n  {\n    \"id\": \"rockefeller_center_channel_gardens\",\n    \"name\": \"Rockefeller Center \\u2014 Channel Gardens\",\n    \"day\": \"2025-10-03\",\n    \"block\": \"Night\",\n    \"rank\": 3,\n    \"bearing\": \"S toward 30 Rock\",\n    \"whyNow\": \"Flags, fountains, reflections; seasonal installs.\",\n    \"gear\": \"24\\u201370mm; fast 35mm\",\n    \"settings\": \"Tripod: 1\\u201310s @ f/6.3\\u20138, ISO 100\\u2013400; expose for highlights.\",\n    \"activeAnchor\": 0,\n    \"anchors\": [\n      {\n        \"label\": \"Main view\",\n        \"lat\": 40.7586,\n        \"lon\": -73.9787\n      }\n    ],\n    \"micro\": [\n      {\n        \"title\": \"Centerline\",\n        \"r\": 0.0,\n        \"bearing\": 180,\n        \"dir\": \"\",\n        \"detail\": \"Main alignment from anchor.\"\n      },\n      {\n        \"title\": \"Step\\u2011back\",\n        \"r\": 10.0,\n        \"bearing\": 180,\n        \"dir\": \"\",\n        \"detail\": \"Step back ~10 m; arrow still toward subject.\"\n      },\n      {\n        \"title\": \"Corner curb\",\n        \"r\": 22.0,\n        \"bearing\": 180,\n        \"dir\": \"\",\n        \"detail\": \"Diagonal curb vantage; arrow toward subject.\"\n      }\n    ],\n    \"pins\": [\n      {\n        \"title\": \"Clean tripod placement\",\n        \"detail\": \"Stay behind safety lines; avoid blocking paths.\"\n      },\n      {\n        \"title\": \"Neon trails\",\n        \"detail\": \"1\\u20134s exposures; wait for buses to paint the frame.\"\n      },\n      {\n        \"title\": \"Skyline mirror\",\n        \"detail\": \"Use 16\\u201324 for big scene; 50mm for graphic details.\"\n      }\n    ],\n    \"shots\": [\n      {\n        \"title\": \"Long exposure base (16\\u201324mm)\",\n        \"detail\": \"1\\u201310s; shoot 10\\u201320 frames; pick best trails.\"\n      },\n      {\n        \"title\": \"Tele crop (50/70mm)\",\n        \"detail\": \"Abstract geometry; isolate building tops.\"\n      },\n      {\n        \"title\": \"Reflections\",\n        \"detail\": \"Find puddles or river edges; go low for mirror.\"\n      },\n      {\n        \"title\": \"People blur (1\\u20132s)\",\n        \"detail\": \"Trace flows of commuters without losing structure.\"\n      },\n      {\n        \"title\": \"Icon detail\",\n        \"detail\": \"Tight shot of recognizable element to close the set.\"\n      }\n    ]\n  },\n  {\n    \"id\": \"flatiron_at_night_23rd_broadway\",\n    \"name\": \"Flatiron at Night (23rd & Broadway)\",\n    \"day\": \"2025-10-03\",\n    \"block\": \"Night\",\n    \"rank\": 4,\n    \"bearing\": \"NNE along 5th Ave\",\n    \"whyNow\": \"Taxi streaks; puddle mirrors near crosswalks.\",\n    \"gear\": \"24\\u201370mm; tripod\",\n    \"settings\": \"Tripod: 1\\u201310s @ f/6.3\\u20138, ISO 100\\u2013400; expose for highlights.\",\n    \"activeAnchor\": 0,\n    \"anchors\": [\n      {\n        \"label\": \"Main view\",\n        \"lat\": 40.7411,\n        \"lon\": -73.9897\n      }\n    ],\n    \"micro\": [\n      {\n        \"title\": \"Centerline\",\n        \"r\": 0.0,\n        \"bearing\": 22.5,\n        \"dir\": \"\",\n        \"detail\": \"Main alignment from anchor.\"\n      },\n      {\n        \"title\": \"Step\\u2011back\",\n        \"r\": 10.0,\n        \"bearing\": 22.5,\n        \"dir\": \"\",\n        \"detail\": \"Step back ~10 m; arrow still toward subject.\"\n      },\n      {\n        \"title\": \"Corner curb\",\n        \"r\": 22.0,\n        \"bearing\": 22.5,\n        \"dir\": \"\",\n        \"detail\": \"Diagonal curb vantage; arrow toward subject.\"\n      }\n    ],\n    \"pins\": [\n      {\n        \"title\": \"Clean tripod placement\",\n        \"detail\": \"Stay behind safety lines; avoid blocking paths.\"\n      },\n      {\n        \"title\": \"Neon trails\",\n        \"detail\": \"1\\u20134s exposures; wait for buses to paint the frame.\"\n      },\n      {\n        \"title\": \"Skyline mirror\",\n        \"detail\": \"Use 16\\u201324 for big scene; 50mm for graphic details.\"\n      }\n    ],\n    \"shots\": [\n      {\n        \"title\": \"Long exposure base (16\\u201324mm)\",\n        \"detail\": \"1\\u201310s; shoot 10\\u201320 frames; pick best trails.\"\n      },\n      {\n        \"title\": \"Tele crop (50/70mm)\",\n        \"detail\": \"Abstract geometry; isolate building tops.\"\n      },\n      {\n        \"title\": \"Reflections\",\n        \"detail\": \"Find puddles or river edges; go low for mirror.\"\n      },\n      {\n        \"title\": \"People blur (1\\u20132s)\",\n        \"detail\": \"Trace flows of commuters without losing structure.\"\n      },\n      {\n        \"title\": \"Icon detail\",\n        \"detail\": \"Tight shot of recognizable element to close the set.\"\n      }\n    ]\n  },\n  {\n    \"id\": \"brooklyn_bridge_walkway_night_symmetry\",\n    \"name\": \"Brooklyn Bridge \\u2014 Walkway (night symmetry)\",\n    \"day\": \"2025-10-03\",\n    \"block\": \"Night\",\n    \"rank\": 5,\n    \"bearing\": \"WNW to skyline\",\n    \"whyNow\": \"Cable geometry; keep to the side, be mindful of cyclists.\",\n    \"gear\": \"16\\u201324mm; clamp\",\n    \"settings\": \"Tripod: 1\\u201310s @ f/6.3\\u20138, ISO 100\\u2013400; expose for highlights.\",\n    \"activeAnchor\": 0,\n    \"anchors\": [\n      {\n        \"label\": \"Main view\",\n        \"lat\": 40.7067,\n        \"lon\": -73.9967\n      }\n    ],\n    \"micro\": [\n      {\n        \"title\": \"Centerline\",\n        \"r\": 0.0,\n        \"bearing\": 292.5,\n        \"dir\": \"\",\n        \"detail\": \"Main alignment from anchor.\"\n      },\n      {\n        \"title\": \"Step\\u2011back\",\n        \"r\": 10.0,\n        \"bearing\": 292.5,\n        \"dir\": \"\",\n        \"detail\": \"Step back ~10 m; arrow still toward subject.\"\n      },\n      {\n        \"title\": \"Corner curb\",\n        \"r\": 22.0,\n        \"bearing\": 292.5,\n        \"dir\": \"\",\n        \"detail\": \"Diagonal curb vantage; arrow toward subject.\"\n      }\n    ],\n    \"pins\": [\n      {\n        \"title\": \"Clean tripod placement\",\n        \"detail\": \"Stay behind safety lines; avoid blocking paths.\"\n      },\n      {\n        \"title\": \"Neon trails\",\n        \"detail\": \"1\\u20134s exposures; wait for buses to paint the frame.\"\n      },\n      {\n        \"title\": \"Skyline mirror\",\n        \"detail\": \"Use 16\\u201324 for big scene; 50mm for graphic details.\"\n      }\n    ],\n    \"shots\": [\n      {\n        \"title\": \"Long exposure base (16\\u201324mm)\",\n        \"detail\": \"1\\u201310s; shoot 10\\u201320 frames; pick best trails.\"\n      },\n      {\n        \"title\": \"Tele crop (50/70mm)\",\n        \"detail\": \"Abstract geometry; isolate building tops.\"\n      },\n      {\n        \"title\": \"Reflections\",\n        \"detail\": \"Find puddles or river edges; go low for mirror.\"\n      },\n      {\n        \"title\": \"People blur (1\\u20132s)\",\n        \"detail\": \"Trace flows of commuters without losing structure.\"\n      },\n      {\n        \"title\": \"Icon detail\",\n        \"detail\": \"Tight shot of recognizable element to close the set.\"\n      }\n    ]\n  },\n  {\n    \"id\": \"bethesda_terrace_arcade\",\n    \"name\": \"Bethesda Terrace \\u2014 Arcade\",\n    \"day\": \"2025-10-04\",\n    \"block\": \"Morning\",\n    \"rank\": 1,\n    \"bearing\": \"N/S arcade axis\",\n    \"whyNow\": \"Start at civil dawn; vanishing arches + warm side\\u2011light.\",\n    \"gear\": \"24\\u201370mm; fast 35mm\",\n    \"settings\": \"Arrive 30\\u201360 min before sunrise; handheld 1/250s+ @ f/5.6\\u20138, ISO 100\\u2013400.\",\n    \"activeAnchor\": 0,\n    \"anchors\": [\n      {\n        \"label\": \"Main view\",\n        \"lat\": 40.7741,\n        \"lon\": -73.9701\n      }\n    ],\n    \"micro\": [\n      {\n        \"title\": \"Centerline\",\n        \"r\": 0.0,\n        \"bearing\": 0,\n        \"dir\": \"\",\n        \"detail\": \"Main alignment from anchor.\"\n      },\n      {\n        \"title\": \"Step\\u2011back\",\n        \"r\": 10.0,\n        \"bearing\": 0,\n        \"dir\": \"\",\n        \"detail\": \"Step back ~10 m; arrow still toward subject.\"\n      },\n      {\n        \"title\": \"Corner curb\",\n        \"r\": 22.0,\n        \"bearing\": 0,\n        \"dir\": \"\",\n        \"detail\": \"Diagonal curb vantage; arrow toward subject.\"\n      }\n    ],\n    \"pins\": [\n      {\n        \"title\": \"Parking gap watch\",\n        \"detail\": \"Scan for a temporary gap to remove parked cars; be ready to shoot quickly.\"\n      },\n      {\n        \"title\": \"Reflections after wash\",\n        \"detail\": \"Street or lawn irrigation leaves sheen\\u2014use CPL to control glare.\"\n      },\n      {\n        \"title\": \"Taxi or jogger streaks\",\n        \"detail\": \"If traffic begins, try 1/8\\u20131/2s for motion streaks.\"\n      }\n    ],\n    \"shots\": [\n      {\n        \"title\": \"Establishing wide (16\\u201324mm)\",\n        \"detail\": \"Include context and sky color; keep verticals straight.\"\n      },\n      {\n        \"title\": \"Low angle leading lines\",\n        \"detail\": \"Camera close to ground; emphasize texture or rails.\"\n      },\n      {\n        \"title\": \"Human scale\",\n        \"detail\": \"Single figure walking/running; time the stride.\"\n      },\n      {\n        \"title\": \"Compressed crop (50/70mm)\",\n        \"detail\": \"Use longer end for a clean graphic frame; crop if needed.\"\n      },\n      {\n        \"title\": \"Detail cutaway\",\n        \"detail\": \"Reflections, signage, patterns that summarize place.\"\n      }\n    ]\n  },\n  {\n    \"id\": \"bow_bridge_the_lake\",\n    \"name\": \"Bow Bridge \\u2014 The Lake\",\n    \"day\": \"2025-10-04\",\n    \"block\": \"Morning\",\n    \"rank\": 2,\n    \"bearing\": \"W/NW across The Lake\",\n    \"whyNow\": \"Reflections; rowboats add scale; avoid mid\\u2011bridge vibration.\",\n    \"gear\": \"24\\u201370mm (at 70mm) or 50mm (crop); CPL\",\n    \"settings\": \"Arrive 30\\u201360 min before sunrise; handheld 1/250s+ @ f/5.6\\u20138, ISO 100\\u2013400.\",\n    \"activeAnchor\": 0,\n    \"anchors\": [\n      {\n        \"label\": \"Main view\",\n        \"lat\": 40.7755,\n        \"lon\": -73.9703\n      }\n    ],\n    \"micro\": [\n      {\n        \"title\": \"Centerline\",\n        \"r\": 0.0,\n        \"bearing\": 270,\n        \"dir\": \"\",\n        \"detail\": \"Main alignment from anchor.\"\n      },\n      {\n        \"title\": \"Step\\u2011back\",\n        \"r\": 10.0,\n        \"bearing\": 270,\n        \"dir\": \"\",\n        \"detail\": \"Step back ~10 m; arrow still toward subject.\"\n      },\n      {\n        \"title\": \"Corner curb\",\n        \"r\": 22.0,\n        \"bearing\": 270,\n        \"dir\": \"\",\n        \"detail\": \"Diagonal curb vantage; arrow toward subject.\"\n      }\n    ],\n    \"pins\": [\n      {\n        \"title\": \"Parking gap watch\",\n        \"detail\": \"Scan for a temporary gap to remove parked cars; be ready to shoot quickly.\"\n      },\n      {\n        \"title\": \"Reflections after wash\",\n        \"detail\": \"Street or lawn irrigation leaves sheen\\u2014use CPL to control glare.\"\n      },\n      {\n        \"title\": \"Taxi or jogger streaks\",\n        \"detail\": \"If traffic begins, try 1/8\\u20131/2s for motion streaks.\"\n      }\n    ],\n    \"shots\": [\n      {\n        \"title\": \"Establishing wide (16\\u201324mm)\",\n        \"detail\": \"Include context and sky color; keep verticals straight.\"\n      },\n      {\n        \"title\": \"Low angle leading lines\",\n        \"detail\": \"Camera close to ground; emphasize texture or rails.\"\n      },\n      {\n        \"title\": \"Human scale\",\n        \"detail\": \"Single figure walking/running; time the stride.\"\n      },\n      {\n        \"title\": \"Compressed crop (50/70mm)\",\n        \"detail\": \"Use longer end for a clean graphic frame; crop if needed.\"\n      },\n      {\n        \"title\": \"Detail cutaway\",\n        \"detail\": \"Reflections, signage, patterns that summarize place.\"\n      }\n    ]\n  },\n  {\n    \"id\": \"the_mall_literary_walk\",\n    \"name\": \"The Mall / Literary Walk\",\n    \"day\": \"2025-10-04\",\n    \"block\": \"Morning\",\n    \"rank\": 3,\n    \"bearing\": \"S/N tree tunnel\",\n    \"whyNow\": \"Vanishing lines; portraits with layered bokeh.\",\n    \"gear\": \"35/85mm primes\",\n    \"settings\": \"Arrive 30\\u201360 min before sunrise; handheld 1/250s+ @ f/5.6\\u20138, ISO 100\\u2013400.\",\n    \"activeAnchor\": 0,\n    \"anchors\": [\n      {\n        \"label\": \"Main view\",\n        \"lat\": 40.7735,\n        \"lon\": -73.9719\n      }\n    ],\n    \"micro\": [\n      {\n        \"title\": \"Centerline\",\n        \"r\": 0.0,\n        \"bearing\": 180,\n        \"dir\": \"\",\n        \"detail\": \"Main alignment from anchor.\"\n      },\n      {\n        \"title\": \"Step\\u2011back\",\n        \"r\": 10.0,\n        \"bearing\": 180,\n        \"dir\": \"\",\n        \"detail\": \"Step back ~10 m; arrow still toward subject.\"\n      },\n      {\n        \"title\": \"Corner curb\",\n        \"r\": 22.0,\n        \"bearing\": 180,\n        \"dir\": \"\",\n        \"detail\": \"Diagonal curb vantage; arrow toward subject.\"\n      }\n    ],\n    \"pins\": [\n      {\n        \"title\": \"Parking gap watch\",\n        \"detail\": \"Scan for a temporary gap to remove parked cars; be ready to shoot quickly.\"\n      },\n      {\n        \"title\": \"Reflections after wash\",\n        \"detail\": \"Street or lawn irrigation leaves sheen\\u2014use CPL to control glare.\"\n      },\n      {\n        \"title\": \"Taxi or jogger streaks\",\n        \"detail\": \"If traffic begins, try 1/8\\u20131/2s for motion streaks.\"\n      }\n    ],\n    \"shots\": [\n      {\n        \"title\": \"Establishing wide (16\\u201324mm)\",\n        \"detail\": \"Include context and sky color; keep verticals straight.\"\n      },\n      {\n        \"title\": \"Low angle leading lines\",\n        \"detail\": \"Camera close to ground; emphasize texture or rails.\"\n      },\n      {\n        \"title\": \"Human scale\",\n        \"detail\": \"Single figure walking/running; time the stride.\"\n      },\n      {\n        \"title\": \"Compressed crop (50/70mm)\",\n        \"detail\": \"Use longer end for a clean graphic frame; crop if needed.\"\n      },\n      {\n        \"title\": \"Detail cutaway\",\n        \"detail\": \"Reflections, signage, patterns that summarize place.\"\n      }\n    ]\n  },\n  {\n    \"id\": \"the_ramble_central_park\",\n    \"name\": \"The Ramble (Central Park)\",\n    \"day\": \"2025-10-04\",\n    \"block\": \"Morning\",\n    \"rank\": 4,\n    \"bearing\": \"Woodland pockets\",\n    \"whyNow\": \"Boardwalk reflections; winding paths; birds.\",\n    \"gear\": \"24\\u201370mm (at 70mm) or 50mm (crop); close\\u2011up filter\",\n    \"settings\": \"Arrive 30\\u201360 min before sunrise; handheld 1/250s+ @ f/5.6\\u20138, ISO 100\\u2013400.\",\n    \"activeAnchor\": 0,\n    \"anchors\": [\n      {\n        \"label\": \"Main view\",\n        \"lat\": 40.7783,\n        \"lon\": -73.9715\n      }\n    ],\n    \"micro\": [\n      {\n        \"title\": \"Centerline\",\n        \"r\": 0.0,\n        \"bearing\": 0.0,\n        \"dir\": \"\",\n        \"detail\": \"Main alignment from anchor.\"\n      },\n      {\n        \"title\": \"Step\\u2011back\",\n        \"r\": 10.0,\n        \"bearing\": 0.0,\n        \"dir\": \"\",\n        \"detail\": \"Step back ~10 m; arrow still toward subject.\"\n      },\n      {\n        \"title\": \"Corner curb\",\n        \"r\": 22.0,\n        \"bearing\": 0.0,\n        \"dir\": \"\",\n        \"detail\": \"Diagonal curb vantage; arrow toward subject.\"\n      }\n    ],\n    \"pins\": [\n      {\n        \"title\": \"Parking gap watch\",\n        \"detail\": \"Scan for a temporary gap to remove parked cars; be ready to shoot quickly.\"\n      },\n      {\n        \"title\": \"Reflections after wash\",\n        \"detail\": \"Street or lawn irrigation leaves sheen\\u2014use CPL to control glare.\"\n      },\n      {\n        \"title\": \"Taxi or jogger streaks\",\n        \"detail\": \"If traffic begins, try 1/8\\u20131/2s for motion streaks.\"\n      }\n    ],\n    \"shots\": [\n      {\n        \"title\": \"Establishing wide (16\\u201324mm)\",\n        \"detail\": \"Include context and sky color; keep verticals straight.\"\n      },\n      {\n        \"title\": \"Low angle leading lines\",\n        \"detail\": \"Camera close to ground; emphasize texture or rails.\"\n      },\n      {\n        \"title\": \"Human scale\",\n        \"detail\": \"Single figure walking/running; time the stride.\"\n      },\n      {\n        \"title\": \"Compressed crop (50/70mm)\",\n        \"detail\": \"Use longer end for a clean graphic frame; crop if needed.\"\n      },\n      {\n        \"title\": \"Detail cutaway\",\n        \"detail\": \"Reflections, signage, patterns that summarize place.\"\n      }\n    ]\n  },\n  {\n    \"id\": \"conservatory_water_alice_statue\",\n    \"name\": \"Conservatory Water & 'Alice' Statue\",\n    \"day\": \"2025-10-04\",\n    \"block\": \"Morning\",\n    \"rank\": 5,\n    \"bearing\": \"W toward UES skyline\",\n    \"whyNow\": \"RC boats; statue details; mirror water in calm air.\",\n    \"gear\": \"24\\u201370mm; 24\\u201370mm (at 70mm) or 50mm (crop)\",\n    \"settings\": \"Arrive 30\\u201360 min before sunrise; handheld 1/250s+ @ f/5.6\\u20138, ISO 100\\u2013400.\",\n    \"activeAnchor\": 0,\n    \"anchors\": [\n      {\n        \"label\": \"Main view\",\n        \"lat\": 40.7759,\n        \"lon\": -73.9667\n      }\n    ],\n    \"micro\": [\n      {\n        \"title\": \"Centerline\",\n        \"r\": 0.0,\n        \"bearing\": 270,\n        \"dir\": \"\",\n        \"detail\": \"Main alignment from anchor.\"\n      },\n      {\n        \"title\": \"Step\\u2011back\",\n        \"r\": 10.0,\n        \"bearing\": 270,\n        \"dir\": \"\",\n        \"detail\": \"Step back ~10 m; arrow still toward subject.\"\n      },\n      {\n        \"title\": \"Corner curb\",\n        \"r\": 22.0,\n        \"bearing\": 270,\n        \"dir\": \"\",\n        \"detail\": \"Diagonal curb vantage; arrow toward subject.\"\n      }\n    ],\n    \"pins\": [\n      {\n        \"title\": \"Parking gap watch\",\n        \"detail\": \"Scan for a temporary gap to remove parked cars; be ready to shoot quickly.\"\n      },\n      {\n        \"title\": \"Reflections after wash\",\n        \"detail\": \"Street or lawn irrigation leaves sheen\\u2014use CPL to control glare.\"\n      },\n      {\n        \"title\": \"Taxi or jogger streaks\",\n        \"detail\": \"If traffic begins, try 1/8\\u20131/2s for motion streaks.\"\n      }\n    ],\n    \"shots\": [\n      {\n        \"title\": \"Establishing wide (16\\u201324mm)\",\n        \"detail\": \"Include context and sky color; keep verticals straight.\"\n      },\n      {\n        \"title\": \"Low angle leading lines\",\n        \"detail\": \"Camera close to ground; emphasize texture or rails.\"\n      },\n      {\n        \"title\": \"Human scale\",\n        \"detail\": \"Single figure walking/running; time the stride.\"\n      },\n      {\n        \"title\": \"Compressed crop (50/70mm)\",\n        \"detail\": \"Use longer end for a clean graphic frame; crop if needed.\"\n      },\n      {\n        \"title\": \"Detail cutaway\",\n        \"detail\": \"Reflections, signage, patterns that summarize place.\"\n      }\n    ]\n  },\n  {\n    \"id\": \"soho_greene_prince\",\n    \"name\": \"SoHo \\u2014 Greene & Prince\",\n    \"day\": \"2025-10-04\",\n    \"block\": \"Afternoon\",\n    \"rank\": 1,\n    \"bearing\": \"N/S street axes\",\n    \"whyNow\": \"Cast\\u2011iron fa\\u00e7ades; cobbles; shadow geometry.\",\n    \"gear\": \"35mm prime; CPL\",\n    \"settings\": \"Work shade and geometry; CPL for glare; 1/250s+ @ f/5.6\\u20138.\",\n    \"activeAnchor\": 0,\n    \"anchors\": [\n      {\n        \"label\": \"Main view\",\n        \"lat\": 40.7249,\n        \"lon\": -74.002\n      }\n    ],\n    \"micro\": [\n      {\n        \"title\": \"Centerline\",\n        \"r\": 0.0,\n        \"bearing\": 0,\n        \"dir\": \"\",\n        \"detail\": \"Main alignment from anchor.\"\n      },\n      {\n        \"title\": \"Step\\u2011back\",\n        \"r\": 10.0,\n        \"bearing\": 0,\n        \"dir\": \"\",\n        \"detail\": \"Step back ~10 m; arrow still toward subject.\"\n      },\n      {\n        \"title\": \"Corner curb\",\n        \"r\": 22.0,\n        \"bearing\": 0,\n        \"dir\": \"\",\n        \"detail\": \"Diagonal curb vantage; arrow toward subject.\"\n      }\n    ],\n    \"pins\": [\n      {\n        \"title\": \"Shadow geometry\",\n        \"detail\": \"Look for repeating cast-iron, stoops, or rails to form patterns.\"\n      },\n      {\n        \"title\": \"Street portrait moment\",\n        \"detail\": \"Use 35/50mm for environmental portraits; ask politely.\"\n      },\n      {\n        \"title\": \"Compression detail\",\n        \"detail\": \"Use the 70mm end of 24\\u201370; crop if needed for stronger layers.\"\n      }\n    ],\n    \"shots\": [\n      {\n        \"title\": \"Shadow lattice (24\\u201370mm)\",\n        \"detail\": \"Catch window/railing shadows making a grid or stripes.\"\n      },\n      {\n        \"title\": \"Corner portrait (35/50mm)\",\n        \"detail\": \"Subject on edge of light; background in soft shade.\"\n      },\n      {\n        \"title\": \"Texture macro (50mm)\",\n        \"detail\": \"Look for worn stone/metal details; low ISO, high f\\u2011stop.\"\n      },\n      {\n        \"title\": \"Layered street (70mm)\",\n        \"detail\": \"Stack elements; shoot through foreground.\"\n      },\n      {\n        \"title\": \"Signage type\",\n        \"detail\": \"Tight crop of iconic typography or tile work.\"\n      }\n    ]\n  },\n  {\n    \"id\": \"west_village_grove_bedford\",\n    \"name\": \"West Village \\u2014 Grove & Bedford\",\n    \"day\": \"2025-10-04\",\n    \"block\": \"Afternoon\",\n    \"rank\": 2,\n    \"bearing\": \"W/E side\\u2011streets\",\n    \"whyNow\": \"Brownstone stoops; caf\\u00e9 life; tele details of signage.\",\n    \"gear\": \"35/50mm fast prime\",\n    \"settings\": \"Work shade and geometry; CPL for glare; 1/250s+ @ f/5.6\\u20138.\",\n    \"activeAnchor\": 0,\n    \"anchors\": [\n      {\n        \"label\": \"Main view\",\n        \"lat\": 40.7326,\n        \"lon\": -74.0063\n      }\n    ],\n    \"micro\": [\n      {\n        \"title\": \"Centerline\",\n        \"r\": 0.0,\n        \"bearing\": 270,\n        \"dir\": \"\",\n        \"detail\": \"Main alignment from anchor.\"\n      },\n      {\n        \"title\": \"Step\\u2011back\",\n        \"r\": 10.0,\n        \"bearing\": 270,\n        \"dir\": \"\",\n        \"detail\": \"Step back ~10 m; arrow still toward subject.\"\n      },\n      {\n        \"title\": \"Corner curb\",\n        \"r\": 22.0,\n        \"bearing\": 270,\n        \"dir\": \"\",\n        \"detail\": \"Diagonal curb vantage; arrow toward subject.\"\n      }\n    ],\n    \"pins\": [\n      {\n        \"title\": \"Shadow geometry\",\n        \"detail\": \"Look for repeating cast-iron, stoops, or rails to form patterns.\"\n      },\n      {\n        \"title\": \"Street portrait moment\",\n        \"detail\": \"Use 35/50mm for environmental portraits; ask politely.\"\n      },\n      {\n        \"title\": \"Compression detail\",\n        \"detail\": \"Use the 70mm end of 24\\u201370; crop if needed for stronger layers.\"\n      }\n    ],\n    \"shots\": [\n      {\n        \"title\": \"Shadow lattice (24\\u201370mm)\",\n        \"detail\": \"Catch window/railing shadows making a grid or stripes.\"\n      },\n      {\n        \"title\": \"Corner portrait (35/50mm)\",\n        \"detail\": \"Subject on edge of light; background in soft shade.\"\n      },\n      {\n        \"title\": \"Texture macro (50mm)\",\n        \"detail\": \"Look for worn stone/metal details; low ISO, high f\\u2011stop.\"\n      },\n      {\n        \"title\": \"Layered street (70mm)\",\n        \"detail\": \"Stack elements; shoot through foreground.\"\n      },\n      {\n        \"title\": \"Signage type\",\n        \"detail\": \"Tight crop of iconic typography or tile work.\"\n      }\n    ]\n  },\n  {\n    \"id\": \"chinatown_doyers_st_bloody_angle\",\n    \"name\": \"Chinatown \\u2014 Doyers St (Bloody Angle)\",\n    \"day\": \"2025-10-04\",\n    \"block\": \"Afternoon\",\n    \"rank\": 3,\n    \"bearing\": \"SE curve alley\",\n    \"whyNow\": \"Lanterns; scooter pans at 1/15\\u20131/25s; typography.\",\n    \"gear\": \"24\\u201370mm; fast 35mm\",\n    \"settings\": \"Work shade and geometry; CPL for glare; 1/250s+ @ f/5.6\\u20138.\",\n    \"activeAnchor\": 0,\n    \"anchors\": [\n      {\n        \"label\": \"Main view\",\n        \"lat\": 40.7149,\n        \"lon\": -73.9968\n      }\n    ],\n    \"micro\": [\n      {\n        \"title\": \"Centerline\",\n        \"r\": 0.0,\n        \"bearing\": 135,\n        \"dir\": \"\",\n        \"detail\": \"Main alignment from anchor.\"\n      },\n      {\n        \"title\": \"Step\\u2011back\",\n        \"r\": 10.0,\n        \"bearing\": 135,\n        \"dir\": \"\",\n        \"detail\": \"Step back ~10 m; arrow still toward subject.\"\n      },\n      {\n        \"title\": \"Corner curb\",\n        \"r\": 22.0,\n        \"bearing\": 135,\n        \"dir\": \"\",\n        \"detail\": \"Diagonal curb vantage; arrow toward subject.\"\n      }\n    ],\n    \"pins\": [\n      {\n        \"title\": \"Shadow geometry\",\n        \"detail\": \"Look for repeating cast-iron, stoops, or rails to form patterns.\"\n      },\n      {\n        \"title\": \"Street portrait moment\",\n        \"detail\": \"Use 35/50mm for environmental portraits; ask politely.\"\n      },\n      {\n        \"title\": \"Compression detail\",\n        \"detail\": \"Use the 70mm end of 24\\u201370; crop if needed for stronger layers.\"\n      }\n    ],\n    \"shots\": [\n      {\n        \"title\": \"Shadow lattice (24\\u201370mm)\",\n        \"detail\": \"Catch window/railing shadows making a grid or stripes.\"\n      },\n      {\n        \"title\": \"Corner portrait (35/50mm)\",\n        \"detail\": \"Subject on edge of light; background in soft shade.\"\n      },\n      {\n        \"title\": \"Texture macro (50mm)\",\n        \"detail\": \"Look for worn stone/metal details; low ISO, high f\\u2011stop.\"\n      },\n      {\n        \"title\": \"Layered street (70mm)\",\n        \"detail\": \"Stack elements; shoot through foreground.\"\n      },\n      {\n        \"title\": \"Signage type\",\n        \"detail\": \"Tight crop of iconic typography or tile work.\"\n      }\n    ]\n  },\n  {\n    \"id\": \"lower_east_side_orchard_st\",\n    \"name\": \"Lower East Side \\u2014 Orchard St\",\n    \"day\": \"2025-10-04\",\n    \"block\": \"Afternoon\",\n    \"rank\": 4,\n    \"bearing\": \"N/S urban canyon\",\n    \"whyNow\": \"Tenement fa\\u00e7ades; murals; market candids.\",\n    \"gear\": \"35mm; 24\\u201370mm (at 70mm) or 50mm (crop)\",\n    \"settings\": \"Work shade and geometry; CPL for glare; 1/250s+ @ f/5.6\\u20138.\",\n    \"activeAnchor\": 0,\n    \"anchors\": [\n      {\n        \"label\": \"Main view\",\n        \"lat\": 40.7196,\n        \"lon\": -73.9896\n      }\n    ],\n    \"micro\": [\n      {\n        \"title\": \"Centerline\",\n        \"r\": 0.0,\n        \"bearing\": 0,\n        \"dir\": \"\",\n        \"detail\": \"Main alignment from anchor.\"\n      },\n      {\n        \"title\": \"Step\\u2011back\",\n        \"r\": 10.0,\n        \"bearing\": 0,\n        \"dir\": \"\",\n        \"detail\": \"Step back ~10 m; arrow still toward subject.\"\n      },\n      {\n        \"title\": \"Corner curb\",\n        \"r\": 22.0,\n        \"bearing\": 0,\n        \"dir\": \"\",\n        \"detail\": \"Diagonal curb vantage; arrow toward subject.\"\n      }\n    ],\n    \"pins\": [\n      {\n        \"title\": \"Shadow geometry\",\n        \"detail\": \"Look for repeating cast-iron, stoops, or rails to form patterns.\"\n      },\n      {\n        \"title\": \"Street portrait moment\",\n        \"detail\": \"Use 35/50mm for environmental portraits; ask politely.\"\n      },\n      {\n        \"title\": \"Compression detail\",\n        \"detail\": \"Use the 70mm end of 24\\u201370; crop if needed for stronger layers.\"\n      }\n    ],\n    \"shots\": [\n      {\n        \"title\": \"Shadow lattice (24\\u201370mm)\",\n        \"detail\": \"Catch window/railing shadows making a grid or stripes.\"\n      },\n      {\n        \"title\": \"Corner portrait (35/50mm)\",\n        \"detail\": \"Subject on edge of light; background in soft shade.\"\n      },\n      {\n        \"title\": \"Texture macro (50mm)\",\n        \"detail\": \"Look for worn stone/metal details; low ISO, high f\\u2011stop.\"\n      },\n      {\n        \"title\": \"Layered street (70mm)\",\n        \"detail\": \"Stack elements; shoot through foreground.\"\n      },\n      {\n        \"title\": \"Signage type\",\n        \"detail\": \"Tight crop of iconic typography or tile work.\"\n      }\n    ]\n  },\n  {\n    \"id\": \"manhattan_bridge_arch_colonnade_canal_bowery\",\n    \"name\": \"Manhattan Bridge Arch & Colonnade (Canal/Bowery)\",\n    \"day\": \"2025-10-04\",\n    \"block\": \"Afternoon\",\n    \"rank\": 5,\n    \"bearing\": \"W toward arch\",\n    \"whyNow\": \"Classical arch symmetry; taxi/bus streaks.\",\n    \"gear\": \"24\\u201370mm; ND\",\n    \"settings\": \"Work shade and geometry; CPL for glare; 1/250s+ @ f/5.6\\u20138.\",\n    \"activeAnchor\": 0,\n    \"anchors\": [\n      {\n        \"label\": \"Main view\",\n        \"lat\": 40.7139,\n        \"lon\": -73.9967\n      }\n    ],\n    \"micro\": [\n      {\n        \"title\": \"Centerline\",\n        \"r\": 0.0,\n        \"bearing\": 270,\n        \"dir\": \"\",\n        \"detail\": \"Main alignment from anchor.\"\n      },\n      {\n        \"title\": \"Step\\u2011back\",\n        \"r\": 10.0,\n        \"bearing\": 270,\n        \"dir\": \"\",\n        \"detail\": \"Step back ~10 m; arrow still toward subject.\"\n      },\n      {\n        \"title\": \"Corner curb\",\n        \"r\": 22.0,\n        \"bearing\": 270,\n        \"dir\": \"\",\n        \"detail\": \"Diagonal curb vantage; arrow toward subject.\"\n      }\n    ],\n    \"pins\": [\n      {\n        \"title\": \"Shadow geometry\",\n        \"detail\": \"Look for repeating cast-iron, stoops, or rails to form patterns.\"\n      },\n      {\n        \"title\": \"Street portrait moment\",\n        \"detail\": \"Use 35/50mm for environmental portraits; ask politely.\"\n      },\n      {\n        \"title\": \"Compression detail\",\n        \"detail\": \"Use the 70mm end of 24\\u201370; crop if needed for stronger layers.\"\n      }\n    ],\n    \"shots\": [\n      {\n        \"title\": \"Shadow lattice (24\\u201370mm)\",\n        \"detail\": \"Catch window/railing shadows making a grid or stripes.\"\n      },\n      {\n        \"title\": \"Corner portrait (35/50mm)\",\n        \"detail\": \"Subject on edge of light; background in soft shade.\"\n      },\n      {\n        \"title\": \"Texture macro (50mm)\",\n        \"detail\": \"Look for worn stone/metal details; low ISO, high f\\u2011stop.\"\n      },\n      {\n        \"title\": \"Layered street (70mm)\",\n        \"detail\": \"Stack elements; shoot through foreground.\"\n      },\n      {\n        \"title\": \"Signage type\",\n        \"detail\": \"Tight crop of iconic typography or tile work.\"\n      }\n    ]\n  },\n  {\n    \"id\": \"gantry_plaza_state_park_lic\",\n    \"name\": \"Gantry Plaza State Park (LIC)\",\n    \"day\": \"2025-10-04\",\n    \"block\": \"Evening\",\n    \"rank\": 1,\n    \"bearing\": \"W to Midtown\",\n    \"whyNow\": \"Boardwalk S\\u2011curve; skyline pano; check wind for reflections.\",\n    \"gear\": \"24\\u201370mm; ND; tripod\",\n    \"settings\": \"Blue-hour blend; 1/60\\u20131s @ f/5.6\\u20138, ISO 100\\u2013800; bracketing if needed.\",\n    \"activeAnchor\": 0,\n    \"anchors\": [\n      {\n        \"label\": \"Main view\",\n        \"lat\": 40.7447,\n        \"lon\": -73.9576\n      }\n    ],\n    \"micro\": [\n      {\n        \"title\": \"Centerline\",\n        \"r\": 0.0,\n        \"bearing\": 270,\n        \"dir\": \"\",\n        \"detail\": \"Main alignment from anchor.\"\n      },\n      {\n        \"title\": \"Step\\u2011back\",\n        \"r\": 10.0,\n        \"bearing\": 270,\n        \"dir\": \"\",\n        \"detail\": \"Step back ~10 m; arrow still toward subject.\"\n      },\n      {\n        \"title\": \"Corner curb\",\n        \"r\": 22.0,\n        \"bearing\": 270,\n        \"dir\": \"\",\n        \"detail\": \"Diagonal curb vantage; arrow toward subject.\"\n      }\n    ],\n    \"pins\": [\n      {\n        \"title\": \"Blue-hour reflections\",\n        \"detail\": \"Arrive 45\\u201375 min before sunset; water calms near high tide.\"\n      },\n      {\n        \"title\": \"Silhouette walkers\",\n        \"detail\": \"Expose for sky; use crosswalks as a stage.\"\n      },\n      {\n        \"title\": \"Ferry or car streaks\",\n        \"detail\": \"1\\u20132s for ferries/traffic; tripod or brace on railing.\"\n      }\n    ],\n    \"shots\": [\n      {\n        \"title\": \"Blue-hour skyline (16\\u201324mm)\",\n        \"detail\": \"Balance ambient & city lights; 10\\u201320 min after sunset.\"\n      },\n      {\n        \"title\": \"Silhouette frame (35/50mm)\",\n        \"detail\": \"Backlight against sky/water; faster shutter.\"\n      },\n      {\n        \"title\": \"Symmetry (24\\u201370mm)\",\n        \"detail\": \"Use bridges/arches/railings; centered composition.\"\n      },\n      {\n        \"title\": \"Panning ferry (1/8\\u20131/4s)\",\n        \"detail\": \"Follow motion for streaky yet readable subject.\"\n      },\n      {\n        \"title\": \"Detail twinkle\",\n        \"detail\": \"Tight crop on lights/signs; sparkle highlights.\"\n      }\n    ]\n  },\n  {\n    \"id\": \"domino_park_williamsburg\",\n    \"name\": \"Domino Park (Williamsburg)\",\n    \"day\": \"2025-10-04\",\n    \"block\": \"Evening\",\n    \"rank\": 2,\n    \"bearing\": \"W/SW to skyline\",\n    \"whyNow\": \"Catwalk frames; ferry streaks; bridge tele.\",\n    \"gear\": \"24\\u201370mm; 24\\u201370mm (at 70mm) or 50mm (crop); CPL\",\n    \"settings\": \"Blue-hour blend; 1/60\\u20131s @ f/5.6\\u20138, ISO 100\\u2013800; bracketing if needed.\",\n    \"activeAnchor\": 0,\n    \"anchors\": [\n      {\n        \"label\": \"Main view\",\n        \"lat\": 40.7145,\n        \"lon\": -73.9672\n      }\n    ],\n    \"micro\": [\n      {\n        \"title\": \"Centerline\",\n        \"r\": 0.0,\n        \"bearing\": 270,\n        \"dir\": \"\",\n        \"detail\": \"Main alignment from anchor.\"\n      },\n      {\n        \"title\": \"Step\\u2011back\",\n        \"r\": 10.0,\n        \"bearing\": 270,\n        \"dir\": \"\",\n        \"detail\": \"Step back ~10 m; arrow still toward subject.\"\n      },\n      {\n        \"title\": \"Corner curb\",\n        \"r\": 22.0,\n        \"bearing\": 270,\n        \"dir\": \"\",\n        \"detail\": \"Diagonal curb vantage; arrow toward subject.\"\n      }\n    ],\n    \"pins\": [\n      {\n        \"title\": \"Blue-hour reflections\",\n        \"detail\": \"Arrive 45\\u201375 min before sunset; water calms near high tide.\"\n      },\n      {\n        \"title\": \"Silhouette walkers\",\n        \"detail\": \"Expose for sky; use crosswalks as a stage.\"\n      },\n      {\n        \"title\": \"Ferry or car streaks\",\n        \"detail\": \"1\\u20132s for ferries/traffic; tripod or brace on railing.\"\n      }\n    ],\n    \"shots\": [\n      {\n        \"title\": \"Blue-hour skyline (16\\u201324mm)\",\n        \"detail\": \"Balance ambient & city lights; 10\\u201320 min after sunset.\"\n      },\n      {\n        \"title\": \"Silhouette frame (35/50mm)\",\n        \"detail\": \"Backlight against sky/water; faster shutter.\"\n      },\n      {\n        \"title\": \"Symmetry (24\\u201370mm)\",\n        \"detail\": \"Use bridges/arches/railings; centered composition.\"\n      },\n      {\n        \"title\": \"Panning ferry (1/8\\u20131/4s)\",\n        \"detail\": \"Follow motion for streaky yet readable subject.\"\n      },\n      {\n        \"title\": \"Detail twinkle\",\n        \"detail\": \"Tight crop on lights/signs; sparkle highlights.\"\n      }\n    ]\n  },\n  {\n    \"id\": \"four_freedoms_park_roosevelt_island_tip\",\n    \"name\": \"Four Freedoms Park (Roosevelt Island tip)\",\n    \"day\": \"2025-10-04\",\n    \"block\": \"Evening\",\n    \"rank\": 3,\n    \"bearing\": \"WSW toward Midtown East\",\n    \"whyNow\": \"Tree all\\u00e9e symmetry; granite minimalism; UN skyline.\",\n    \"gear\": \"16\\u201324mm; 24\\u201370mm (at 70mm) or 50mm (crop); tripod\",\n    \"settings\": \"Blue-hour blend; 1/60\\u20131s @ f/5.6\\u20138, ISO 100\\u2013800; bracketing if needed.\",\n    \"activeAnchor\": 0,\n    \"anchors\": [\n      {\n        \"label\": \"Main view\",\n        \"lat\": 40.7532,\n        \"lon\": -73.9544\n      }\n    ],\n    \"micro\": [\n      {\n        \"title\": \"Centerline\",\n        \"r\": 0.0,\n        \"bearing\": 247.5,\n        \"dir\": \"\",\n        \"detail\": \"Main alignment from anchor.\"\n      },\n      {\n        \"title\": \"Step\\u2011back\",\n        \"r\": 10.0,\n        \"bearing\": 247.5,\n        \"dir\": \"\",\n        \"detail\": \"Step back ~10 m; arrow still toward subject.\"\n      },\n      {\n        \"title\": \"Corner curb\",\n        \"r\": 22.0,\n        \"bearing\": 247.5,\n        \"dir\": \"\",\n        \"detail\": \"Diagonal curb vantage; arrow toward subject.\"\n      }\n    ],\n    \"pins\": [\n      {\n        \"title\": \"Blue-hour reflections\",\n        \"detail\": \"Arrive 45\\u201375 min before sunset; water calms near high tide.\"\n      },\n      {\n        \"title\": \"Silhouette walkers\",\n        \"detail\": \"Expose for sky; use crosswalks as a stage.\"\n      },\n      {\n        \"title\": \"Ferry or car streaks\",\n        \"detail\": \"1\\u20132s for ferries/traffic; tripod or brace on railing.\"\n      }\n    ],\n    \"shots\": [\n      {\n        \"title\": \"Blue-hour skyline (16\\u201324mm)\",\n        \"detail\": \"Balance ambient & city lights; 10\\u201320 min after sunset.\"\n      },\n      {\n        \"title\": \"Silhouette frame (35/50mm)\",\n        \"detail\": \"Backlight against sky/water; faster shutter.\"\n      },\n      {\n        \"title\": \"Symmetry (24\\u201370mm)\",\n        \"detail\": \"Use bridges/arches/railings; centered composition.\"\n      },\n      {\n        \"title\": \"Panning ferry (1/8\\u20131/4s)\",\n        \"detail\": \"Follow motion for streaky yet readable subject.\"\n      },\n      {\n        \"title\": \"Detail twinkle\",\n        \"detail\": \"Tight crop on lights/signs; sparkle highlights.\"\n      }\n    ]\n  },\n  {\n    \"id\": \"battery_park_esplanade\",\n    \"name\": \"Battery Park Esplanade\",\n    \"day\": \"2025-10-04\",\n    \"block\": \"Evening\",\n    \"rank\": 4,\n    \"bearing\": \"SW/W to harbor\",\n    \"whyNow\": \"Tele Statue of Liberty; jogger silhouettes; golden water.\",\n    \"gear\": \"24\\u201370mm (at 70mm) or 50mm (crop); ND\",\n    \"settings\": \"Blue-hour blend; 1/60\\u20131s @ f/5.6\\u20138, ISO 100\\u2013800; bracketing if needed.\",\n    \"activeAnchor\": 0,\n    \"anchors\": [\n      {\n        \"label\": \"Main view\",\n        \"lat\": 40.7033,\n        \"lon\": -74.017\n      }\n    ],\n    \"micro\": [\n      {\n        \"title\": \"Centerline\",\n        \"r\": 0.0,\n        \"bearing\": 225,\n        \"dir\": \"\",\n        \"detail\": \"Main alignment from anchor.\"\n      },\n      {\n        \"title\": \"Step\\u2011back\",\n        \"r\": 10.0,\n        \"bearing\": 225,\n        \"dir\": \"\",\n        \"detail\": \"Step back ~10 m; arrow still toward subject.\"\n      },\n      {\n        \"title\": \"Corner curb\",\n        \"r\": 22.0,\n        \"bearing\": 225,\n        \"dir\": \"\",\n        \"detail\": \"Diagonal curb vantage; arrow toward subject.\"\n      }\n    ],\n    \"pins\": [\n      {\n        \"title\": \"Blue-hour reflections\",\n        \"detail\": \"Arrive 45\\u201375 min before sunset; water calms near high tide.\"\n      },\n      {\n        \"title\": \"Silhouette walkers\",\n        \"detail\": \"Expose for sky; use crosswalks as a stage.\"\n      },\n      {\n        \"title\": \"Ferry or car streaks\",\n        \"detail\": \"1\\u20132s for ferries/traffic; tripod or brace on railing.\"\n      }\n    ],\n    \"shots\": [\n      {\n        \"title\": \"Blue-hour skyline (16\\u201324mm)\",\n        \"detail\": \"Balance ambient & city lights; 10\\u201320 min after sunset.\"\n      },\n      {\n        \"title\": \"Silhouette frame (35/50mm)\",\n        \"detail\": \"Backlight against sky/water; faster shutter.\"\n      },\n      {\n        \"title\": \"Symmetry (24\\u201370mm)\",\n        \"detail\": \"Use bridges/arches/railings; centered composition.\"\n      },\n      {\n        \"title\": \"Panning ferry (1/8\\u20131/4s)\",\n        \"detail\": \"Follow motion for streaky yet readable subject.\"\n      },\n      {\n        \"title\": \"Detail twinkle\",\n        \"detail\": \"Tight crop on lights/signs; sparkle highlights.\"\n      }\n    ]\n  },\n  {\n    \"id\": \"hoboken_pier_a_park\",\n    \"name\": \"Hoboken \\u2014 Pier A Park\",\n    \"day\": \"2025-10-04\",\n    \"block\": \"Evening\",\n    \"rank\": 5,\n    \"bearing\": \"E to Lower Manhattan\",\n    \"whyNow\": \"Full skyline pano; path lamps for starbursts at f/16.\",\n    \"gear\": \"24\\u201370mm; tripod\",\n    \"settings\": \"Blue-hour blend; 1/60\\u20131s @ f/5.6\\u20138, ISO 100\\u2013800; bracketing if needed.\",\n    \"activeAnchor\": 0,\n    \"anchors\": [\n      {\n        \"label\": \"Main view\",\n        \"lat\": 40.7378,\n        \"lon\": -74.0261\n      }\n    ],\n    \"micro\": [\n      {\n        \"title\": \"Centerline\",\n        \"r\": 0.0,\n        \"bearing\": 90,\n        \"dir\": \"\",\n        \"detail\": \"Main alignment from anchor.\"\n      },\n      {\n        \"title\": \"Step\\u2011back\",\n        \"r\": 10.0,\n        \"bearing\": 90,\n        \"dir\": \"\",\n        \"detail\": \"Step back ~10 m; arrow still toward subject.\"\n      },\n      {\n        \"title\": \"Corner curb\",\n        \"r\": 22.0,\n        \"bearing\": 90,\n        \"dir\": \"\",\n        \"detail\": \"Diagonal curb vantage; arrow toward subject.\"\n      }\n    ],\n    \"pins\": [\n      {\n        \"title\": \"Blue-hour reflections\",\n        \"detail\": \"Arrive 45\\u201375 min before sunset; water calms near high tide.\"\n      },\n      {\n        \"title\": \"Silhouette walkers\",\n        \"detail\": \"Expose for sky; use crosswalks as a stage.\"\n      },\n      {\n        \"title\": \"Ferry or car streaks\",\n        \"detail\": \"1\\u20132s for ferries/traffic; tripod or brace on railing.\"\n      }\n    ],\n    \"shots\": [\n      {\n        \"title\": \"Blue-hour skyline (16\\u201324mm)\",\n        \"detail\": \"Balance ambient & city lights; 10\\u201320 min after sunset.\"\n      },\n      {\n        \"title\": \"Silhouette frame (35/50mm)\",\n        \"detail\": \"Backlight against sky/water; faster shutter.\"\n      },\n      {\n        \"title\": \"Symmetry (24\\u201370mm)\",\n        \"detail\": \"Use bridges/arches/railings; centered composition.\"\n      },\n      {\n        \"title\": \"Panning ferry (1/8\\u20131/4s)\",\n        \"detail\": \"Follow motion for streaky yet readable subject.\"\n      },\n      {\n        \"title\": \"Detail twinkle\",\n        \"detail\": \"Tight crop on lights/signs; sparkle highlights.\"\n      }\n    ]\n  },\n  {\n    \"id\": \"jane_s_carousel_dumbo\",\n    \"name\": \"Jane\\u2019s Carousel (DUMBO)\",\n    \"day\": \"2025-10-04\",\n    \"block\": \"Night\",\n    \"rank\": 1,\n    \"bearing\": \"W & N to bridges/skyline\",\n    \"whyNow\": \"Carousel glow + long exposure boats.\",\n    \"gear\": \"24\\u201370mm; mini\\u2011tripod; ND\",\n    \"settings\": \"Tripod: 1\\u201310s @ f/6.3\\u20138, ISO 100\\u2013400; expose for highlights.\",\n    \"activeAnchor\": 0,\n    \"anchors\": [\n      {\n        \"label\": \"Main view\",\n        \"lat\": 40.7033,\n        \"lon\": -73.996\n      }\n    ],\n    \"micro\": [\n      {\n        \"title\": \"Centerline\",\n        \"r\": 0.0,\n        \"bearing\": 270,\n        \"dir\": \"\",\n        \"detail\": \"Main alignment from anchor.\"\n      },\n      {\n        \"title\": \"Step\\u2011back\",\n        \"r\": 10.0,\n        \"bearing\": 270,\n        \"dir\": \"\",\n        \"detail\": \"Step back ~10 m; arrow still toward subject.\"\n      },\n      {\n        \"title\": \"Corner curb\",\n        \"r\": 22.0,\n        \"bearing\": 270,\n        \"dir\": \"\",\n        \"detail\": \"Diagonal curb vantage; arrow toward subject.\"\n      }\n    ],\n    \"pins\": [\n      {\n        \"title\": \"Clean tripod placement\",\n        \"detail\": \"Stay behind safety lines; avoid blocking paths.\"\n      },\n      {\n        \"title\": \"Neon trails\",\n        \"detail\": \"1\\u20134s exposures; wait for buses to paint the frame.\"\n      },\n      {\n        \"title\": \"Skyline mirror\",\n        \"detail\": \"Use 16\\u201324 for big scene; 50mm for graphic details.\"\n      }\n    ],\n    \"shots\": [\n      {\n        \"title\": \"Long exposure base (16\\u201324mm)\",\n        \"detail\": \"1\\u201310s; shoot 10\\u201320 frames; pick best trails.\"\n      },\n      {\n        \"title\": \"Tele crop (50/70mm)\",\n        \"detail\": \"Abstract geometry; isolate building tops.\"\n      },\n      {\n        \"title\": \"Reflections\",\n        \"detail\": \"Find puddles or river edges; go low for mirror.\"\n      },\n      {\n        \"title\": \"People blur (1\\u20132s)\",\n        \"detail\": \"Trace flows of commuters without losing structure.\"\n      },\n      {\n        \"title\": \"Icon detail\",\n        \"detail\": \"Tight shot of recognizable element to close the set.\"\n      }\n    ]\n  },\n  {\n    \"id\": \"hunters_point_south_park_lic\",\n    \"name\": \"Hunters Point South Park (LIC)\",\n    \"day\": \"2025-10-04\",\n    \"block\": \"Night\",\n    \"rank\": 2,\n    \"bearing\": \"W/SW to Midtown\",\n    \"whyNow\": \"Midtown mirror on calm nights; ferry trails 10\\u201330s.\",\n    \"gear\": \"16\\u201324mm; tripod\",\n    \"settings\": \"Tripod: 1\\u201310s @ f/6.3\\u20138, ISO 100\\u2013400; expose for highlights.\",\n    \"activeAnchor\": 0,\n    \"anchors\": [\n      {\n        \"label\": \"Main view\",\n        \"lat\": 40.744,\n        \"lon\": -73.9581\n      }\n    ],\n    \"micro\": [\n      {\n        \"title\": \"Centerline\",\n        \"r\": 0.0,\n        \"bearing\": 270,\n        \"dir\": \"\",\n        \"detail\": \"Main alignment from anchor.\"\n      },\n      {\n        \"title\": \"Step\\u2011back\",\n        \"r\": 10.0,\n        \"bearing\": 270,\n        \"dir\": \"\",\n        \"detail\": \"Step back ~10 m; arrow still toward subject.\"\n      },\n      {\n        \"title\": \"Corner curb\",\n        \"r\": 22.0,\n        \"bearing\": 270,\n        \"dir\": \"\",\n        \"detail\": \"Diagonal curb vantage; arrow toward subject.\"\n      }\n    ],\n    \"pins\": [\n      {\n        \"title\": \"Clean tripod placement\",\n        \"detail\": \"Stay behind safety lines; avoid blocking paths.\"\n      },\n      {\n        \"title\": \"Neon trails\",\n        \"detail\": \"1\\u20134s exposures; wait for buses to paint the frame.\"\n      },\n      {\n        \"title\": \"Skyline mirror\",\n        \"detail\": \"Use 16\\u201324 for big scene; 50mm for graphic details.\"\n      }\n    ],\n    \"shots\": [\n      {\n        \"title\": \"Long exposure base (16\\u201324mm)\",\n        \"detail\": \"1\\u201310s; shoot 10\\u201320 frames; pick best trails.\"\n      },\n      {\n        \"title\": \"Tele crop (50/70mm)\",\n        \"detail\": \"Abstract geometry; isolate building tops.\"\n      },\n      {\n        \"title\": \"Reflections\",\n        \"detail\": \"Find puddles or river edges; go low for mirror.\"\n      },\n      {\n        \"title\": \"People blur (1\\u20132s)\",\n        \"detail\": \"Trace flows of commuters without losing structure.\"\n      },\n      {\n        \"title\": \"Icon detail\",\n        \"detail\": \"Tight shot of recognizable element to close the set.\"\n      }\n    ]\n  },\n  {\n    \"id\": \"brooklyn_heights_promenade_night_skyline\",\n    \"name\": \"Brooklyn Heights Promenade (night skyline)\",\n    \"day\": \"2025-10-04\",\n    \"block\": \"Night\",\n    \"rank\": 3,\n    \"bearing\": \"WSW across East River\",\n    \"whyNow\": \"Blue\\u2011hour pano; BQE light ribbons below in places.\",\n    \"gear\": \"24\\u201370mm; tripod\",\n    \"settings\": \"Tripod: 1\\u201310s @ f/6.3\\u20138, ISO 100\\u2013400; expose for highlights.\",\n    \"activeAnchor\": 0,\n    \"anchors\": [\n      {\n        \"label\": \"Main view\",\n        \"lat\": 40.6969,\n        \"lon\": -73.9969\n      }\n    ],\n    \"micro\": [\n      {\n        \"title\": \"Centerline\",\n        \"r\": 0.0,\n        \"bearing\": 247.5,\n        \"dir\": \"\",\n        \"detail\": \"Main alignment from anchor.\"\n      },\n      {\n        \"title\": \"Step\\u2011back\",\n        \"r\": 10.0,\n        \"bearing\": 247.5,\n        \"dir\": \"\",\n        \"detail\": \"Step back ~10 m; arrow still toward subject.\"\n      },\n      {\n        \"title\": \"Corner curb\",\n        \"r\": 22.0,\n        \"bearing\": 247.5,\n        \"dir\": \"\",\n        \"detail\": \"Diagonal curb vantage; arrow toward subject.\"\n      }\n    ],\n    \"pins\": [\n      {\n        \"title\": \"Clean tripod placement\",\n        \"detail\": \"Stay behind safety lines; avoid blocking paths.\"\n      },\n      {\n        \"title\": \"Neon trails\",\n        \"detail\": \"1\\u20134s exposures; wait for buses to paint the frame.\"\n      },\n      {\n        \"title\": \"Skyline mirror\",\n        \"detail\": \"Use 16\\u201324 for big scene; 50mm for graphic details.\"\n      }\n    ],\n    \"shots\": [\n      {\n        \"title\": \"Long exposure base (16\\u201324mm)\",\n        \"detail\": \"1\\u201310s; shoot 10\\u201320 frames; pick best trails.\"\n      },\n      {\n        \"title\": \"Tele crop (50/70mm)\",\n        \"detail\": \"Abstract geometry; isolate building tops.\"\n      },\n      {\n        \"title\": \"Reflections\",\n        \"detail\": \"Find puddles or river edges; go low for mirror.\"\n      },\n      {\n        \"title\": \"People blur (1\\u20132s)\",\n        \"detail\": \"Trace flows of commuters without losing structure.\"\n      },\n      {\n        \"title\": \"Icon detail\",\n        \"detail\": \"Tight shot of recognizable element to close the set.\"\n      }\n    ]\n  },\n  {\n    \"id\": \"manhattan_bridge_pedestrian_walkway_night\",\n    \"name\": \"Manhattan Bridge \\u2014 Pedestrian Walkway (night)\",\n    \"day\": \"2025-10-04\",\n    \"block\": \"Night\",\n    \"rank\": 4,\n    \"bearing\": \"SW toward FiDi\",\n    \"whyNow\": \"Train streaks; industrial geometry; gritty B&W options.\",\n    \"gear\": \"24\\u201370mm; tripod\",\n    \"settings\": \"Tripod: 1\\u201310s @ f/6.3\\u20138, ISO 100\\u2013400; expose for highlights.\",\n    \"activeAnchor\": 0,\n    \"anchors\": [\n      {\n        \"label\": \"Main view\",\n        \"lat\": 40.7132,\n        \"lon\": -73.993\n      }\n    ],\n    \"micro\": [\n      {\n        \"title\": \"Centerline\",\n        \"r\": 0.0,\n        \"bearing\": 225,\n        \"dir\": \"\",\n        \"detail\": \"Main alignment from anchor.\"\n      },\n      {\n        \"title\": \"Step\\u2011back\",\n        \"r\": 10.0,\n        \"bearing\": 225,\n        \"dir\": \"\",\n        \"detail\": \"Step back ~10 m; arrow still toward subject.\"\n      },\n      {\n        \"title\": \"Corner curb\",\n        \"r\": 22.0,\n        \"bearing\": 225,\n        \"dir\": \"\",\n        \"detail\": \"Diagonal curb vantage; arrow toward subject.\"\n      }\n    ],\n    \"pins\": [\n      {\n        \"title\": \"Clean tripod placement\",\n        \"detail\": \"Stay behind safety lines; avoid blocking paths.\"\n      },\n      {\n        \"title\": \"Neon trails\",\n        \"detail\": \"1\\u20134s exposures; wait for buses to paint the frame.\"\n      },\n      {\n        \"title\": \"Skyline mirror\",\n        \"detail\": \"Use 16\\u201324 for big scene; 50mm for graphic details.\"\n      }\n    ],\n    \"shots\": [\n      {\n        \"title\": \"Long exposure base (16\\u201324mm)\",\n        \"detail\": \"1\\u201310s; shoot 10\\u201320 frames; pick best trails.\"\n      },\n      {\n        \"title\": \"Tele crop (50/70mm)\",\n        \"detail\": \"Abstract geometry; isolate building tops.\"\n      },\n      {\n        \"title\": \"Reflections\",\n        \"detail\": \"Find puddles or river edges; go low for mirror.\"\n      },\n      {\n        \"title\": \"People blur (1\\u20132s)\",\n        \"detail\": \"Trace flows of commuters without losing structure.\"\n      },\n      {\n        \"title\": \"Icon detail\",\n        \"detail\": \"Tight shot of recognizable element to close the set.\"\n      }\n    ]\n  },\n  {\n    \"id\": \"34th_st_6th_ave_herald_sq_esb_crosswalk_trails\",\n    \"name\": \"34th St & 6th Ave (Herald Sq \\u2014 ESB crosswalk trails)\",\n    \"day\": \"2025-10-04\",\n    \"block\": \"Night\",\n    \"rank\": 5,\n    \"bearing\": \"N/E to ESB\",\n    \"whyNow\": \"Crosswalk light trails with ESB framed above.\",\n    \"gear\": \"24\\u201370mm; tripod\",\n    \"settings\": \"Tripod: 1\\u201310s @ f/6.3\\u20138, ISO 100\\u2013400; expose for highlights.\",\n    \"activeAnchor\": 0,\n    \"anchors\": [\n      {\n        \"label\": \"Main view\",\n        \"lat\": 40.7496,\n        \"lon\": -73.987\n      }\n    ],\n    \"micro\": [\n      {\n        \"title\": \"Centerline\",\n        \"r\": 0.0,\n        \"bearing\": 0,\n        \"dir\": \"\",\n        \"detail\": \"Main alignment from anchor.\"\n      },\n      {\n        \"title\": \"Step\\u2011back\",\n        \"r\": 10.0,\n        \"bearing\": 0,\n        \"dir\": \"\",\n        \"detail\": \"Step back ~10 m; arrow still toward subject.\"\n      },\n      {\n        \"title\": \"Corner curb\",\n        \"r\": 22.0,\n        \"bearing\": 0,\n        \"dir\": \"\",\n        \"detail\": \"Diagonal curb vantage; arrow toward subject.\"\n      }\n    ],\n    \"pins\": [\n      {\n        \"title\": \"Clean tripod placement\",\n        \"detail\": \"Stay behind safety lines; avoid blocking paths.\"\n      },\n      {\n        \"title\": \"Neon trails\",\n        \"detail\": \"1\\u20134s exposures; wait for buses to paint the frame.\"\n      },\n      {\n        \"title\": \"Skyline mirror\",\n        \"detail\": \"Use 16\\u201324 for big scene; 50mm for graphic details.\"\n      }\n    ],\n    \"shots\": [\n      {\n        \"title\": \"Long exposure base (16\\u201324mm)\",\n        \"detail\": \"1\\u201310s; shoot 10\\u201320 frames; pick best trails.\"\n      },\n      {\n        \"title\": \"Tele crop (50/70mm)\",\n        \"detail\": \"Abstract geometry; isolate building tops.\"\n      },\n      {\n        \"title\": \"Reflections\",\n        \"detail\": \"Find puddles or river edges; go low for mirror.\"\n      },\n      {\n        \"title\": \"People blur (1\\u20132s)\",\n        \"detail\": \"Trace flows of commuters without losing structure.\"\n      },\n      {\n        \"title\": \"Icon detail\",\n        \"detail\": \"Tight shot of recognizable element to close the set.\"\n      }\n    ]\n  }\n];\nexport default LOCATIONS;\n", "lib/googleLoader": "\n// lib/googleLoader.js\n// Idempotent Promise-based Google loader. Avoids duplicate loads and supports library list.\nconst _global = (typeof window !== 'undefined') ? window : globalThis;\nconst LOADER_KEY = '__google_loader_promises__';\nif (!_global[LOADER_KEY]) _global[LOADER_KEY] = new Map();\n\nexport function loadGoogleMaps(apiKey, libraries = ['places']) {\n  return new Promise((resolve, reject) => {\n    // Already loaded?\n    if (_global.google && _global.google.maps) {\n      // Ensure requested libraries are present (best-effort)\n      return resolve(_global.google);\n    }\n    const libKey = libraries.slice().sort().join(',');\n    const cacheKey = \\`${apiKey}|${libKey}\\`;\n    if (_global[LOADER_KEY].has(cacheKey)) {\n      _global[LOADER_KEY].get(cacheKey).then(resolve).catch(reject);\n      return;\n    }\n    const p = new Promise((res, rej) => {\n      const script = document.createElement('script');\n      const libParam = libraries.length ? \\`&libraries=${encodeURIComponent(libKey)}\\` : '';\n      script.src = \\`https://maps.googleapis.com/maps/api/js?key=${encodeURIComponent(apiKey)}${libParam}\\`;\n      script.async = true;\n      script.onerror = () => rej(new Error('Google Maps failed to load'));\n      script.onload = () => {\n        if (_global.google && _global.google.maps) res(_global.google);\n        else rej(new Error('Google Maps loaded but window.google.maps missing'));\n      };\n      document.head.appendChild(script);\n    });\n    _global[LOADER_KEY].set(cacheKey, p);\n    p.then(resolve).catch(reject);\n  });\n}\n", "lib/sunmoon": "\n// lib/sunmoon.js \u2014 minimal sun/moon calculations adapted from public domain SunCalc formulas\n// Based on https://github.com/mourner/suncalc (MIT), simplified and inlined.\n//\n// NOTE: Times are approximate but sufficient for planning UI. All returned Date objects are in local time.\n\nconst PI = Math.PI;\nconst sin = Math.sin, cos = Math.cos, tan = Math.tan, asin = Math.asin, atan2 = Math.atan2, acos = Math.acos;\nconst rad = PI / 180;\n\nfunction toJulian(date) { return date.valueOf() / 86400000 - 0.5 + 2440588; }\nfunction fromJulian(j) { return new Date((j + 0.5 - 2440588) * 86400000); }\nfunction toDays(date) { return toJulian(date) - 2451545; }\n\n// solar mean anomaly\nfunction solarMeanAnomaly(d) { return rad * (357.5291 + 0.98560028 * d); }\n// ecliptic longitude\nfunction eclipticLon(M) {\n  const C = rad * (1.9148 * Math.sin(M) + 0.02 * Math.sin(2 * M) + 0.0003 * Math.sin(3 * M));\n  const P = rad * 102.9372; // perihelion\n  return M + C + P + PI;\n}\n// declination of the sun from ecliptic longitude\nfunction declination(L, b = 0) {\n  const e = rad * 23.4397;\n  return asin(sin(b) * cos(e) + cos(b) * sin(e) * sin(L));\n}\nfunction rightAscension(L, b = 0) {\n  const e = rad * 23.4397;\n  return atan2(sin(L) * cos(e) - tan(b) * sin(e), cos(L));\n}\nfunction azimuth(H, phi, dec) { return atan2(sin(H), cos(H) * sin(phi) - tan(dec) * cos(phi)); }\nfunction altitude(H, phi, dec) { return asin(sin(phi) * sin(dec) + cos(phi) * cos(dec) * cos(H)); }\n\nfunction siderealTime(d, lw) { return rad * (280.16 + 360.9856235 * d) - lw; }\n\n// returns sun position for a given time and location\nexport function getSunPosition(date, lat, lon) {\n  const lw = rad * -lon;\n  const phi = rad * lat;\n  const d = toDays(date);\n  const M = solarMeanAnomaly(d);\n  const L = eclipticLon(M);\n  const dec = declination(L, 0);\n  const ra = rightAscension(L, 0);\n  const th = siderealTime(d, lw);\n  const H = th - ra;\n  return { azimuth: azimuth(H, phi, dec), altitude: altitude(H, phi, dec) };\n}\n\n// sun times\nfunction julianCycle(d, lw) { return Math.round(d - 0.0009 - lw / (2 * PI)); }\nfunction approxTransit(Ht, lw, n) { return 0.0009 + (Ht + lw) / (2 * PI) + n; }\nfunction solarTransitJ(ds, M, L) { return 2451545 + ds + 0.0053 * Math.sin(M) - 0.0069 * Math.sin(2 * L); }\n\n// hour angle for observations at altitude h\nfunction hourAngle(h, phi, d) {\n  return Math.acos((Math.sin(h) - Math.sin(phi) * Math.sin(d)) / (Math.cos(phi) * Math.cos(d)));\n}\n\n// common event altitudes\nconst J0 = 0.0009;\nconst h0 = -0.83 * rad; // sunrise/sunset\nconst hcCivil = -6 * rad; // civil twilight\n\nexport function getSunTimes(date, lat, lon) {\n  const lw = rad * -lon;\n  const phi = rad * lat;\n  const d = toDays(new Date(date.getFullYear(), date.getMonth(), date.getDate(), 12)); // noon on date\n  const n = julianCycle(d, lw);\n  const ds = approxTransit(0, lw, n);\n  const M = solarMeanAnomaly(ds);\n  const L = eclipticLon(M);\n  const dec = declination(L, 0);\n\n  function timeForAltitude(h) {\n    const w = hourAngle(h, phi, dec);\n    const a = approxTransit(w, lw, n);\n    const b = approxTransit(-w, lw, n);\n    return { set: fromJulian(solarTransitJ(b, M, L)), rise: fromJulian(solarTransitJ(a, M, L)) };\n  }\n  const sunriseSet = timeForAltitude(h0);\n  const civil = timeForAltitude(hcCivil);\n  const result = {\n    sunrise: sunriseSet.rise,\n    sunset: sunriseSet.set,\n    dawn: civil.rise,\n    dusk: civil.set\n  };\n  return result;\n}\n\n// Moon calculations (simplified)\nfunction moonCoords(d) {\n  // geocentric ecliptic coordinates of the moon\n  const L = rad * (218.316 + 13.176396 * d);\n  const M = rad * (134.963 + 13.064993 * d);\n  const F = rad * (93.272 + 13.229350 * d);\n  const l = L + rad * 6.289 * Math.sin(M);\n  const b = rad * 5.128 * Math.sin(F);\n  const dt = 385001 - 20905 * Math.cos(M);\n  return { ra: rightAscension(l, b), dec: declination(l, b), dist: dt };\n}\n\nexport function getMoonIllumination(date) {\n  const d = toDays(date);\n  const sM = solarMeanAnomaly(d);\n  const sL = eclipticLon(sM);\n  const m = moonCoords(d);\n  const sDec = declination(sL, 0);\n  const sRa = rightAscension(sL, 0);\n\n  const phi = acos(Math.sin(sDec) * Math.sin(m.dec) + Math.cos(sDec) * Math.cos(m.dec) * Math.cos(sRa - m.ra));\n  const inc = Math.atan2(149598000 * Math.sin(phi), m.dist - 149598000 * Math.cos(phi));\n  const fraction = (1 + Math.cos(inc)) / 2;\n  // phase: 0 new, 0.5 full\n  const phase = 0.5 + 0.5 * inc / PI * (Math.sign(Math.sin(m.ra - sRa)) || 1);\n  return { fraction, phase };\n}\n\n// Moon rise/set from https://github.com/mourner/suncalc (MIT), simplified\nexport function getMoonTimes(date, lat, lon) {\n  const t = new Date(date); t.setHours(0,0,0,0);\n  const hc = 0.133 * rad; // moonrise/set altitude\n  const h0 = getMoonPosition(t, lat, lon).altitude - hc;\n  let rise, set, ye, above = h0 > 0;\n\n  for (let i = 1; i <= 24; i += 2) {\n    const h1 = getMoonPosition(hoursLater(t, i), lat, lon).altitude - hc;\n    const h2 = getMoonPosition(hoursLater(t, i + 1), lat, lon).altitude - hc;\n    const [a, b, c] = [h0, h1, h2];\n    const xe = (-b + Math.sqrt(b*b - 4*a*c)) / (2*a);\n    const yeTemp = (a*xe + b)*xe + c;\n    const dx = 1.5; // hours\n    if (Math.abs(yeTemp) < 1e-3) ye = i + xe * dx;\n\n    if ((h1 * h2) < 0) {\n      const root = i + ( (h1 - h2) / (h1 - h2) ) * 1; // linear approx\n    }\n\n    const roots = quadraticRoots(a, b, c);\n    if (roots) {\n      const xr = i + roots.r1 * dx;\n      const xs = i + roots.r2 * dx;\n      if (xr >= 0 && xr <= 24) rise = addHours(t, xr);\n      if (xs >= 0 && xs <= 24) set = addHours(t, xs);\n      break;\n    }\n    h0 = h2;\n  }\n  if (!rise && !set) {\n    if (above) { rise = null; set = null; } // moon always above\n    else { rise = null; set = null; } // always below\n  }\n  return { rise, set };\n}\n\nfunction hoursLater(date, h){ const d = new Date(date); d.setHours(d.getHours()+h); return d; }\nfunction addHours(date, h){ const d = new Date(date); d.setMinutes(d.getMinutes()+Math.round(h*60)); return d; }\nfunction quadraticRoots(a,b,c){\n  const d = b*b - 4*a*c;\n  if (d < 0) return null;\n  const s = Math.sqrt(d);\n  const r1 = (-b + s) / (2*a);\n  const r2 = (-b - s) / (2*a);\n  return { r1, r2 };\n}\n\nexport function getMoonPosition(date, lat, lon) {\n  const lw = rad * -lon;\n  const phi = rad * lat;\n  const d = toDays(date);\n  const c = moonCoords(d);\n  const H = siderealTime(d, lw) - c.ra;\n  const h = altitude(H, phi, c.dec);\n  return { azimuth: azimuth(H, phi, c.dec), altitude: h, distance: c.dist };\n}\n\n// Pretty helpers\nexport function fmtTime(dt) {\n  if (!dt) return '\u2014';\n  try {\n    const h = dt.getHours().toString().padStart(2,'0');\n    const m = dt.getMinutes().toString().padStart(2,'0');\n    return \\`${h}:${m}\\`;\n  } catch { return '\u2014'; }\n}\n", "map-google": "\n// map-google.js \u2014 Google Maps engine\nimport { loadGoogleMaps } from 'lib/googleLoader';\n\nexport class GoogleMapEngine {\n  constructor(container) {\n    this.container = container;\n    this.map = null;\n    this.markers = [];\n    this.polylines = [];\n    this.directions = null;\n    this.directionsRenderer = null;\n    this.distanceMatrix = null;\n    this.google = null;\n  }\n\n  async init({ apiKey, center=[40.7128, -74.0060], zoom=12 }) {\n    this.google = await loadGoogleMaps(apiKey, ['places']);\n    this.map = new this.google.maps.Map(this.container, {\n      center: { lat: center[0], lng: center[1] },\n      zoom,\n      mapTypeControl: false,\n      streetViewControl: false,\n      fullscreenControl: true,\n      clickableIcons: false\n    });\n    this.directions = new this.google.maps.DirectionsService();\n    this.directionsRenderer = new this.google.maps.DirectionsRenderer({ suppressMarkers: true, preserveViewport: true });\n    this.directionsRenderer.setMap(this.map);\n    this.distanceMatrix = new this.google.maps.DistanceMatrixService();\n    return this;\n  }\n\n  clear() {\n    this.markers.forEach(m => m.setMap(null));\n    this.polylines.forEach(p => p.setMap(null));\n    this.markers = [];\n    this.polylines = [];\n    if (this.directionsRenderer) this.directionsRenderer.setDirections({ routes: [] });\n  }\n\n  destroy() {\n    this.clear();\n    if (this.map) {\n      this.map = null;\n      this.container.innerHTML = '';\n    }\n  }\n\n  setData(locations, opts={}) {\n    this.clear();\n    const g = this.google;\n    const bounds = new g.maps.LatLngBounds();\n    const colorByBlock = {\n      Morning: '#1f77b4',\n      Afternoon: '#2ca02c',\n      Evening: '#ff7f0e',\n      Night: '#9467bd'\n    };\n    const arrowMeters = 14;\n\n    for (const loc of locations) {\n      const anchor = loc.anchors[loc.activeAnchor || 0];\n      if (!anchor) continue;\n      const aPos = new g.maps.LatLng(anchor.lat, anchor.lon);\n      const m = new g.maps.Marker({\n        position: aPos,\n        map: this.map,\n        title: loc.name,\n        icon: {\n          path: g.maps.SymbolPath.CIRCLE,\n          scale: 6,\n          fillOpacity: 1,\n          fillColor: colorByBlock[loc.block] || '#444',\n          strokeWeight: 1,\n          strokeColor: '#fff'\n        },\n        draggable: true\n      });\n      m.addListener('dragend', (ev) => {\n        const lat = ev.latLng.lat();\n        const lon = ev.latLng.lng();\n        window.dispatchEvent(new CustomEvent('anchor:dragged', { detail: { id: loc.id, anchorIndex: loc.activeAnchor||0, lat, lon } }));\n      });\n      this.markers.push(m);\n      bounds.extend(aPos);\n\n      // micro-pins and subject arrows\n      for (const micro of (loc.micro || [])) {\n        const mp = offsetLatLng(anchor.lat, anchor.lon, micro.r || 0, micro.bearing || 0);\n        const mpPos = new g.maps.LatLng(mp.lat, mp.lon);\n        const microMarker = new g.maps.Marker({\n          position: mpPos, map: this.map, title: micro.title,\n          icon: {\n            path: g.maps.SymbolPath.BACKWARD_CLOSED_ARROW,\n            scale: 4, fillOpacity: 1,\n            fillColor: '#2aa198', strokeWeight: 1, strokeColor: '#004d40'\n          }\n        });\n        this.markers.push(microMarker);\n        bounds.extend(mpPos);\n        // arrow line indicating subject direction (short)\n        const ahead = offsetLatLng(mp.lat, mp.lon, arrowMeters, micro.bearing || 0);\n        const line = new g.maps.Polyline({\n          map: this.map,\n          path: [mpPos, new g.maps.LatLng(ahead.lat, ahead.lon)],\n          strokeColor: '#2aa198', strokeOpacity: 0.9, strokeWeight: 2\n        });\n        this.polylines.push(line);\n      }\n    }\n    if (!bounds.isEmpty()) this.map.fitBounds(bounds);\n  }\n\n  fitForCard(loc) {\n    const g = this.google;\n    const anchor = loc.anchors[loc.activeAnchor || 0];\n    if (!anchor) return;\n    const bounds = new g.maps.LatLngBounds();\n    bounds.extend(new g.maps.LatLng(anchor.lat, anchor.lon));\n    for (const micro of (loc.micro || [])) {\n      const mp = offsetLatLng(anchor.lat, anchor.lon, micro.r || 0, micro.bearing || 0);\n      bounds.extend(new g.maps.LatLng(mp.lat, mp.lon));\n    }\n    this.map.fitBounds(bounds, { top: 40, right: 40, bottom: 40, left: 40 });\n  }\n\n  async routeFromUserTo(anchor) {\n    if (!navigator.geolocation) throw new Error('Geolocation not supported');\n    const pos = await new Promise((res, rej) => navigator.geolocation.getCurrentPosition(res, rej, { enableHighAccuracy: true, maximumAge: 30000, timeout: 10000 }));\n    const origin = { lat: pos.coords.latitude, lng: pos.coords.longitude };\n    const destination = { lat: anchor.lat, lng: anchor.lon };\n\n    // Distance Matrix for ETA\n    const dm = await this.distanceMatrix.getDistanceMatrix({\n      origins: [origin],\n      destinations: [destination],\n      travelMode: this.google.maps.TravelMode.WALKING,\n      unitSystem: this.google.maps.UnitSystem.IMPERIAL\n    });\n    // Draw route\n    const res = await this.directions.route({\n      origin, destination, travelMode: this.google.maps.TravelMode.WALKING\n    });\n    this.directionsRenderer.setDirections(res);\n    const el = dm.rows?.[0]?.elements?.[0];\n    return {\n      origin, destination,\n      distanceText: el?.distance?.text || '',\n      durationText: el?.duration?.text || ''\n    };\n  }\n}\n\n// helpers\nfunction offsetLatLng(lat, lon, rMeters, bearingDeg) {\n  const R = 6378137; // meters\n  const br = (bearingDeg * Math.PI) / 180;\n  const lat1 = (lat * Math.PI) / 180;\n  const lon1 = (lon * Math.PI) / 180;\n  const lat2 = Math.asin(Math.sin(lat1) * Math.cos(rMeters / R) + Math.cos(lat1) * Math.sin(rMeters / R) * Math.cos(br));\n  const lon2 = lon1 + Math.atan2(Math.sin(br) * Math.sin(rMeters / R) * Math.cos(lat1), Math.cos(rMeters / R) - Math.sin(lat1) * Math.sin(lat2));\n  return { lat: (lat2 * 180) / Math.PI, lon: (lon2 * 180) / Math.PI };\n}\n\nexport default GoogleMapEngine;\n", "map-leaflet": "\n// map-leaflet.js \u2014 Leaflet/OSM engine\nlet L = null;\n\nfunction loadLeaflet() {\n  return new Promise((resolve, reject) => {\n    if (L && L.map) return resolve(L);\n    const link = document.createElement('link');\n    link.rel = 'stylesheet';\n    link.href = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.css';\n    link.integrity = 'sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=';\n    link.crossOrigin = '';\n    document.head.appendChild(link);\n\n    const script = document.createElement('script');\n    script.src = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.js';\n    script.integrity = 'sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=';\n    script.crossOrigin = '';\n    script.async = true;\n    script.onload = () => { L = window.L; resolve(L); };\n    script.onerror = () => reject(new Error('Leaflet failed to load'));\n    document.head.appendChild(script);\n  });\n}\n\nexport class LeafletMapEngine {\n  constructor(container) {\n    this.container = container;\n    this.map = null;\n    this.layers = [];\n  }\n\n  async init({ center=[40.7128, -74.0060], zoom=12 }) {\n    await loadLeaflet();\n    this.map = L.map(this.container, { zoomControl: true });\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      maxZoom: 20, attribution: '&copy; OpenStreetMap'\n    }).addTo(this.map);\n    this.map.setView(center, zoom);\n    return this;\n  }\n\n  clear() {\n    this.layers.forEach(l => l.remove());\n    this.layers = [];\n  }\n\n  destroy() {\n    if (this.map) this.map.remove();\n    this.map = null;\n    this.container.innerHTML = '';\n  }\n\n  setData(locations) {\n    this.clear();\n    const colorByBlock = {\n      Morning: '#1f77b4',\n      Afternoon: '#2ca02c',\n      Evening: '#ff7f0e',\n      Night: '#9467bd'\n    };\n    const arrowMeters = 14;\n    const bounds = [];\n    for (const loc of locations) {\n      const anchor = loc.anchors[loc.activeAnchor || 0];\n      if (!anchor) continue;\n      const icon = L.divIcon({\n        className: 'anchor-dot',\n        html: \\`<div style=\"width:12px;height:12px;border-radius:50%;border:2px solid #fff;background:${colorByBlock[loc.block]||'#444'}\"></div>\\`,\n        iconSize: [12,12],\n        iconAnchor: [6,6]\n      });\n      const aMarker = L.marker([anchor.lat, anchor.lon], { icon, draggable: true }).addTo(this.map);\n      aMarker.on('dragend', (ev) => {\n        const latlng = ev.target.getLatLng();\n        window.dispatchEvent(new CustomEvent('anchor:dragged', { detail: { id: loc.id, anchorIndex: loc.activeAnchor||0, lat: latlng.lat, lon: latlng.lng } }));\n      });\n      this.layers.push(aMarker);\n      bounds.push([anchor.lat, anchor.lon]);\n\n      for (const micro of (loc.micro || [])) {\n        const mp = offsetLatLng(anchor.lat, anchor.lon, micro.r || 0, micro.bearing || 0);\n        const microMarker = L.circleMarker([mp.lat, mp.lon], { radius: 4, weight: 1, color: '#004d40', fillColor: '#2aa198', fillOpacity: 1 }).addTo(this.map);\n        this.layers.push(microMarker);\n        bounds.push([mp.lat, mp.lon]);\n        const ahead = offsetLatLng(mp.lat, mp.lon, arrowMeters, micro.bearing || 0);\n        const line = L.polyline([[mp.lat, mp.lon], [ahead.lat, ahead.lon]], { color: '#2aa198', weight: 2, opacity: 0.9 }).addTo(this.map);\n        this.layers.push(line);\n      }\n    }\n    if (bounds.length) this.map.fitBounds(bounds, { padding: [40,40] });\n  }\n\n  fitForCard(loc) {\n    const anchor = loc.anchors[loc.activeAnchor || 0];\n    if (!anchor) return;\n    const pts = [[anchor.lat, anchor.lon]];\n    for (const micro of (loc.micro || [])) {\n      const mp = offsetLatLng(anchor.lat, anchor.lon, micro.r || 0, micro.bearing || 0);\n      pts.push([mp.lat, mp.lon]);\n    }\n    if (pts.length) this.map.fitBounds(pts, { padding: [40,40] });\n  }\n\n  async routeFromUserTo(anchor) {\n    // Leaflet mode: provide text-only ETA via geolocation + haversine, can't draw Google route offline\n    if (!navigator.geolocation) throw new Error('Geolocation not supported');\n    const pos = await new Promise((res, rej) => navigator.geolocation.getCurrentPosition(res, rej, { enableHighAccuracy: true, maximumAge: 30000, timeout: 10000 }));\n    const origin = { lat: pos.coords.latitude, lng: pos.coords.longitude };\n    const meters = haversineMeters(origin.lat, origin.lng, anchor.lat, anchor.lon);\n    const minutes = Math.round(meters / 80); // ~4.8 km/h walking\n    return { origin, destination: { lat: anchor.lat, lng: anchor.lon }, distanceText: \\`${(meters/1000).toFixed(2)} km (approx)\\`, durationText: \\`${minutes} min (approx)\\` };\n  }\n}\n\n// helpers\nfunction offsetLatLng(lat, lon, rMeters, bearingDeg) {\n  const R = 6378137; // meters\n  const br = (bearingDeg * Math.PI) / 180;\n  const lat1 = (lat * Math.PI) / 180;\n  const lon1 = (lon * Math.PI) / 180;\n  const lat2 = Math.asin(Math.sin(lat1) * Math.cos(rMeters / R) + Math.cos(lat1) * Math.sin(rMeters / R) * Math.cos(br));\n  const lon2 = lon1 + Math.atan2(Math.sin(br) * Math.sin(rMeters / R) * Math.cos(lat1), Math.cos(rMeters / R) - Math.sin(lat1) * Math.sin(lat2));\n  return { lat: (lat2 * 180) / Math.PI, lon: (lon2 * 180) / Math.PI };\n}\nfunction haversineMeters(lat1, lon1, lat2, lon2) {\n  const R = 6371000;\n  const dLat = (lat2-lat1) * Math.PI/180;\n  const dLon = (lon2-lon1) * Math.PI/180;\n  const a = Math.sin(dLat/2)**2 + Math.cos(lat1*Math.PI/180)*Math.cos(lat2*Math.PI/180)*Math.sin(dLon/2)**2;\n  return 2*R*Math.asin(Math.min(1, Math.sqrt(a)));\n}\n\nexport default LeafletMapEngine;\n"};
const urls = Object.fromEntries(Object.entries(MODULES).map(([name, code]) => {
  const blob = new Blob([code], { type: 'text/javascript' });
  return [name, URL.createObjectURL(blob)];
}));
const im = document.createElement('script');
im.type = 'importmap';
im.textContent = JSON.stringify({ imports: urls });
document.currentScript.after(im);
Promise.resolve().then(() => import('app'));
</script>
</body>
</html>
